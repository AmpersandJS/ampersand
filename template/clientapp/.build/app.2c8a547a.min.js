!function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,o=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError}for(;r>o;)o in i&&(n=e.call(t,n,i[o],o,i)),o++;return n})}();var Zepto=function(){function t(t){return null==t?String(t):Z[G.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&t.__proto__==Object.prototype}function s(t){return t instanceof Array}function a(t){return"number"==typeof t.length}function c(t){return O.call(t,function(t){return null!=t})}function u(t){return t.length>0?T.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in P?P[t]:P[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||I[l(t)]?e:e+"px"}function p(t){var e,n;return N[t]||(e=M.createElement(t),M.body.appendChild(e),n=$(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),N[t]=n),N[t]}function d(t){return"children"in t?C.call(t.children):T.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function m(t,e,n){for(x in e)n&&(o(e[x])||s(e[x]))?(o(e[x])&&!o(t[x])&&(t[x]={}),s(e[x])&&!s(t[x])&&(t[x]=[]),m(t[x],e[x],n)):e[x]!==k&&(t[x]=e[x])}function g(t,e){return e===k?T(t):T(t).filter(e)}function v(t,n,i,r){return e(n)?n.call(t,i,r):n}function y(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){var n=t.className,i=n&&n.baseVal!==k;return e===k?i?n.baseVal:n:(i?n.baseVal=e:t.className=e,void 0)}function b(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:isNaN(e=Number(t))?/^[\[\{]/.test(t)?T.parseJSON(t):t:e):t}catch(n){return t}}function w(t,e){e(t);for(var n in t.childNodes)w(t.childNodes[n],e)}var k,x,T,A,E,j,S=[],C=S.slice,O=S.filter,M=window.document,N={},P={},$=M.defaultView.getComputedStyle,I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,F=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,B=["val","css","html","text","data","width","height","offset"],q=["after","prepend","before","append"],z=M.createElement("table"),U=M.createElement("tr"),D={tr:M.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:U,th:U,"*":M.createElement("div")},H=/complete|loaded|interactive/,V=/^\.([\w-]+)$/,W=/^#([\w-]*)$/,J=/^[\w-]+$/,Z={},G=Z.toString,X={},K=M.createElement("div");return X.matches=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=K).appendChild(t),i=~X.qsa(r,e).indexOf(t),o&&K.removeChild(t),i},E=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},j=function(t){return O.call(t,function(e,n){return t.indexOf(e)==n})},X.fragment=function(t,e,n){t.replace&&(t=t.replace(F,"<$1></$2>")),e===k&&(e=R.test(t)&&RegExp.$1),e in D||(e="*");var i,r,s=D[e];return s.innerHTML=""+t,r=T.each(C.call(s.childNodes),function(){s.removeChild(this)}),o(n)&&(i=T(r),T.each(n,function(t,e){B.indexOf(t)>-1?i[t](e):i.attr(t,e)})),r},X.Z=function(t,e){return t=t||[],t.__proto__=T.fn,t.selector=e||"",t},X.isZ=function(t){return t instanceof X.Z},X.init=function(t,n){if(t){if(e(t))return T(M).ready(t);if(X.isZ(t))return t;var i;if(s(t))i=c(t);else if(r(t))i=[o(t)?T.extend({},t):t],t=null;else if(R.test(t))i=X.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==k)return T(n).find(t);i=X.qsa(M,t)}return X.Z(i,t)}return X.Z()},T=function(t,e){return X.init(t,e)},T.extend=function(t){var e,n=C.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){m(t,n,e)}),t},X.qsa=function(t,e){var n;return i(t)&&W.test(e)?(n=t.getElementById(RegExp.$1))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:C.call(V.test(e)?t.getElementsByClassName(RegExp.$1):J.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=function(t,e){return t!==e&&t.contains(e)},T.type=t,T.isFunction=e,T.isWindow=n,T.isArray=s,T.isPlainObject=o,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.inArray=function(t,e,n){return S.indexOf.call(e,t,n)},T.camelCase=E,T.trim=function(t){return t.trim()},T.uuid=0,T.support={},T.expr={},T.map=function(t,e){var n,i,r,o=[];if(a(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},T.each=function(t,e){var n,i;if(a(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},T.grep=function(t,e){return O.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()}),T.fn={forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,indexOf:S.indexOf,concat:S.concat,map:function(t){return T(T.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return T(C.apply(this,arguments))},ready:function(t){return H.test(M.readyState)?t(T):M.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===k?C.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return S.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):T(O.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return T(j(this.concat(T(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==k)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?C.call(t):T(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return T(n)},has:function(t){return this.filter(function(){return r(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:T(t)},find:function(t){var e,n=this;return e="object"==typeof t?T(t).filter(function(){var t=this;return S.some.call(n,function(e){return T.contains(e,t)})}):1==this.length?T(X.qsa(this[0],t)):this.map(function(){return X.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=T(t));n&&!(r?r.indexOf(n)>=0:X.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return T(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=T.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(j(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return d(this)}),t)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return O.call(d(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return T.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==$(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=T(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){T(this[0]).before(t=T(t));for(var e;(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=T(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=T(this);(t===k?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return t===k?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;T(this).empty().append(v(this,t,e,n))})},text:function(t){return t===k?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(t,e){var n;return"string"==typeof t&&e===k?0==this.length||1!==this[0].nodeType?k:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(x in t)y(this,x,t[x]);else y(this,t,v(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&y(this,t)})},prop:function(t,e){return e===k?this[0]&&this[0][t]:this.each(function(n){this[t]=v(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+l(t),e);return null!==n?b(n):k},val:function(t){return t===k?this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=v(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=T(this),i=v(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2&&"string"==typeof e)return this[0]&&(this[0].style[E(e)]||$(this[0],"").getPropertyValue(e));var i="";if("string"==t(e))n||0===n?i=l(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(l(e))});else for(x in e)e[x]||0===e[x]?i+=l(x)+":"+f(x,e[x])+";":this.each(function(){this.style.removeProperty(l(x))});return this.each(function(){this.style.cssText+=";"+i})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return S.some.call(this,function(t){return this.test(_(t))},h(t))},addClass:function(t){return this.each(function(e){A=[];var n=_(this),i=v(this,t,e,n);i.split(/\s+/g).forEach(function(t){T(this).hasClass(t)||A.push(t)},this),A.length&&_(this,n+(n?" ":"")+A.join(" "))})},removeClass:function(t){return this.each(function(e){return t===k?_(this,""):(A=_(this),v(this,t,e,A).split(/\s+/g).forEach(function(t){A=A.replace(h(t)," ")}),_(this,A.trim()),void 0)})},toggleClass:function(t,e){return this.each(function(n){var i=T(this),r=v(this,t,n,_(this));r.split(/\s+/g).forEach(function(t){(e===k?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=L.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(T(t).css("margin-top"))||0,n.left-=parseFloat(T(t).css("margin-left"))||0,i.top+=parseFloat(T(e[0]).css("border-top-width"))||0,i.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||M.body;t&&!L.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(t){T.fn[t]=function(e){var r,o=this[0],s=t.replace(/./,function(t){return t[0].toUpperCase()});return e===k?n(o)?o["inner"+s]:i(o)?o.documentElement["offset"+s]:(r=this.offset())&&r[t]:this.each(function(n){o=T(this),o.css(t,v(this,e,n,o[t]()))})}}),q.forEach(function(e,n){var i=n%2;T.fn[e]=function(){var e,r,o=T.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:X.fragment(n)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return T(t).remove();w(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},T.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return T(t)[e](this),this}}),X.Z.prototype=T.fn,X.uniq=j,X.deserializeValue=b,T.zepto=X,T}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(t){function e(t){var e=this.os={},n=this.browser={},i=t.match(/WebKit\/([\d.]+)/),r=t.match(/(Android)\s+([\d.]+)/),o=t.match(/(iPad).*OS\s([\d_]+)/),s=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),a=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=a&&t.match(/TouchPad/),u=t.match(/Kindle\/([\d.]+)/),l=t.match(/Silk\/([\d._]+)/),h=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),p=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),d=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(e.android=!0,e.version=r[2]),s&&(e.ios=e.iphone=!0,e.version=s[2].replace(/_/g,".")),o&&(e.ios=e.ipad=!0,e.version=o[2].replace(/_/g,".")),a&&(e.webos=!0,e.version=a[2]),c&&(e.touchpad=!0),h&&(e.blackberry=!0,e.version=h[2]),f&&(e.bb10=!0,e.version=f[2]),p&&(e.rimtabletos=!0,e.version=p[2]),d&&(n.playbook=!0),u&&(e.kindle=!0,e.version=u[1]),l&&(n.silk=!0,n.version=l[1]),!l&&e.android&&t.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),e.tablet=!!(o||d||r&&!t.match(/Mobile/)||g&&t.match(/Tablet/)),e.phone=!(e.tablet||!(r||s||a||h||f||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/)))}e.call(t,navigator.userAgent),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=p++)}function n(t,n,o,s){if(n=i(n),n.ns)var a=r(n.ns);return(f[e(t)]||[]).filter(function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!a.test(t.ns)||o&&e(t.fn)!==e(o)||s&&t.sel!=s)})}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(e,n,i){"string"!=t.type(e)?t.each(e,i):e.split(/\s/).forEach(function(t){i(t,n)})}function s(t,e){return t.del&&("focus"==t.e||"blur"==t.e)||!!e}function a(t){return m[t]||t}function c(n,r,c,u,l,h){var p=e(n),d=f[p]||(f[p]=[]);o(r,c,function(e,r){var o=i(e);o.fn=r,o.sel=u,o.e in m&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=l&&l(r,e);var c=o.del||r;o.proxy=function(t){var e=c.apply(n,[t].concat(t.data));return e===!1&&(t.preventDefault(),t.stopPropagation()),e},o.i=d.length,d.push(o),n.addEventListener(a(o.e),o.proxy,s(o,h))})}function u(t,i,r,c,u){var l=e(t);o(i||"",r,function(e,i){n(t,e,i,c).forEach(function(e){delete f[l][e.i],t.removeEventListener(a(e.e),e.proxy,s(e,u))})})}function l(e){var n,i={originalEvent:e};for(n in e)y.test(n)||void 0===e[n]||(i[n]=e[n]);return t.each(_,function(t,n){i[t]=function(){return this[n]=g,e[t].apply(e,arguments)},i[n]=v}),i}function h(t){if(!("defaultPrevented"in t)){t.defaultPrevented=!1;var e=t.preventDefault;t.preventDefault=function(){this.defaultPrevented=!0,e.call(this)}}}var f=(t.zepto.qsa,{}),p=1,d={},m={mouseenter:"mouseover",mouseleave:"mouseout"};d.click=d.mousedown=d.mouseup=d.mousemove="MouseEvents",t.event={add:c,remove:u},t.proxy=function(n,i){if(t.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=e(n),r}if("string"==typeof i)return t.proxy(n[i],n);throw new TypeError("expected function")},t.fn.bind=function(t,e){return this.each(function(){c(this,t,e)})},t.fn.unbind=function(t,e){return this.each(function(){u(this,t,e)})},t.fn.one=function(t,e){return this.each(function(n,i){c(this,t,e,null,function(t,e){return function(){var n=t.apply(i,arguments);return u(i,e,t),n}})})};var g=function(){return!0},v=function(){return!1},y=/^([A-Z]|layer[XY]$)/,_={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,n,i){return this.each(function(r,o){c(o,n,i,e,function(n){return function(i){var r,s=t(i.target).closest(e,o).get(0);return s?(r=t.extend(l(i),{currentTarget:s,liveFired:o}),n.apply(s,[r].concat([].slice.call(arguments,1)))):void 0}})})},t.fn.undelegate=function(t,e,n){return this.each(function(){u(this,e,n,t)})},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,i){return!n||t.isFunction(n)?this.bind(e,n||i):this.delegate(n,e,i)},t.fn.off=function(e,n,i){return!n||t.isFunction(n)?this.unbind(e,n||i):this.undelegate(n,e,i)},t.fn.trigger=function(e,n){return("string"==typeof e||t.isPlainObject(e))&&(e=t.Event(e)),h(e),e.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(e)})},t.fn.triggerHandler=function(e,i){var r,o;return this.each(function(s,a){r=l("string"==typeof e?t.Event(e):e),r.data=i,r.target=a,t.each(n(a,e.type||e),function(t,e){return o=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){"string"!=typeof t&&(e=t,t=e.type);var n=document.createEvent(d[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(Zepto),function(t){function e(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.defaultPrevented}function n(t,n,i,r){return t.global?e(n||y,i,r):void 0}function i(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function o(t,e){var i=e.context;return e.beforeSend.call(i,t,e)===!1||n(e,i,"ajaxBeforeSend",[t,e])===!1?!1:(n(e,i,"ajaxSend",[t,e]),void 0)}function s(t,e,i){var r=i.context,o="success";i.success.call(r,t,o,e),n(i,r,"ajaxSuccess",[e,i,t]),c(o,e,i)}function a(t,e,i,r){var o=r.context;r.error.call(o,i,e,t),n(r,o,"ajaxError",[i,r,t]),c(e,i,r)}function c(t,e,i){var o=i.context;i.complete.call(o,e,t),n(i,o,"ajaxComplete",[e,i]),r(i)}function u(){}function l(t){return t&&(t=t.split(";",2)[0]),t&&(t==x?"html":t==k?"json":b.test(t)?"script":w.test(t)&&"xml")||"text"}function h(t,e){return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data))}function p(e,n,i,r){var o=!t.isFunction(n);return{url:e,data:o?n:void 0,success:o?t.isFunction(i)?i:void 0:n,dataType:o?r||i:i}}function d(e,n,i,r){var o,s=t.isArray(n);t.each(n,function(n,a){o=t.type(a),r&&(n=i?r:r+"["+(s?"":n)+"]"),!r&&s?e.add(a.name,a.value):"array"==o||!i&&"object"==o?d(e,a,i,n):e.add(n,a)})}var m,g,v=0,y=window.document,_=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,k="application/json",x="text/html",T=/^\s*$/;t.active=0,t.ajaxJSONP=function(e){if(!("type"in e))return t.ajax(e);var n,i="jsonp"+ ++v,r=y.createElement("script"),c=function(){clearTimeout(n),t(r).remove(),delete window[i]},l=function(t){c(),t&&"timeout"!=t||(window[i]=u),a(null,t||"abort",h,e)},h={abort:l};return o(h,e)===!1?(l("abort"),!1):(window[i]=function(t){c(),s(t,h,e)},r.onerror=function(){l("error")},r.src=e.url.replace(/=\?/,"="+i),t("head").append(r),e.timeout>0&&(n=setTimeout(function(){l("timeout")},e.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:k,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{});for(m in t.ajaxSettings)void 0===n[m]&&(n[m]=t.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),f(n),n.cache===!1&&(n.url=h(n.url,"_="+Date.now()));var r=n.dataType,c=/=\?/.test(n.url);if("jsonp"==r||c)return c||(n.url=h(n.url,"callback=?")),t.ajaxJSONP(n);var p,d=n.accepts[r],v={},y=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,_=n.xhr();n.crossDomain||(v["X-Requested-With"]="XMLHttpRequest"),d&&(v.Accept=d,d.indexOf(",")>-1&&(d=d.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(d)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&(v["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=t.extend(v,n.headers||{}),_.onreadystatechange=function(){if(4==_.readyState){_.onreadystatechange=u,clearTimeout(p);var e,i=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==y){r=r||l(_.getResponseHeader("content-type")),e=_.responseText;try{"script"==r?(1,eval)(e):"xml"==r?e=_.responseXML:"json"==r&&(e=T.test(e)?null:t.parseJSON(e))}catch(o){i=o}i?a(i,"parsererror",_,n):s(e,_,n)}else a(null,_.status?"error":"abort",_,n)}};var b="async"in n?n.async:!0;_.open(n.type,n.url,b);for(g in n.headers)_.setRequestHeader(g,n.headers[g]);return o(_,n)===!1?(_.abort(),!1):(n.timeout>0&&(p=setTimeout(function(){_.onreadystatechange=u,_.abort(),a(null,"timeout",_,n)},n.timeout)),_.send(n.data?n.data:null),_)},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var r,o=this,s=e.split(/\s/),a=p(e,n,i),c=a.success;return s.length>1&&(a.url=s[0],r=s[1]),a.success=function(e){o.html(r?t("<div>").html(e.replace(_,"")).find(r):e),c&&c.apply(o,arguments)},t.ajax(a),this};var A=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(A(t)+"="+A(e))},d(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n=[];return t(Array.prototype.slice.call(this.get(0).elements)).each(function(){e=t(this);var i=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:e.attr("name"),value:e.val()})}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(t,e){function n(t){return i(t.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(t){return t.toLowerCase()}function r(t){return o?o+t:i(t)}var o,s,a,c,u,l,h,f,p="",d={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,g=m.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};t.each(d,function(t,n){return g.style[t+"TransitionProperty"]!==e?(p="-"+i(t)+"-",o=n,!1):void 0}),s=p+"transform",y[a=p+"transition-property"]=y[c=p+"transition-duration"]=y[u=p+"transition-timing-function"]=y[l=p+"animation-name"]=y[h=p+"animation-duration"]=y[f=p+"animation-timing-function"]="",t.fx={off:o===e&&g.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},t.fn.animate=function(e,n,i,r){return t.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3),this.anim(e,n,i,r)},t.fn.anim=function(i,r,o,p){var d,m,g,_={},b="",w=this,k=t.fx.transitionEnd;if(r===e&&(r=.4),t.fx.off&&(r=0),"string"==typeof i)_[l]=i,_[h]=r+"s",_[f]=o||"linear",k=t.fx.animationEnd;else{m=[];for(d in i)v.test(d)?b+=d+"("+i[d]+") ":(_[d]=i[d],m.push(n(d)));b&&(_[s]=b,m.push(s)),r>0&&"object"==typeof i&&(_[a]=m.join(", "),_[c]=r+"s",_[u]=o||"linear")}return g=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(k,g)}t(this).css(y),p&&p.call(this)},r>0&&this.bind(k,g),this.size()&&this.get(0).clientLeft,this.css(_),0>=r&&setTimeout(function(){w.each(function(){g.call(this)})},0),this},g=null}(Zepto),document.title="&!",$("head").prepend(['<link href="/css/bootstrap.css" rel="stylesheet"/>','<link href="/css/app.css" rel="stylesheet"/>','<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0">'].join("")),$(function(){window.times.blastoff=new Date,require("app").blastoff()}),function(){if(!this.require){var t={},e={},n=function(o,s){var a,c=i(s,o),u=e[c];if(u)return u.exports;if(!(a=t[c]||t[c=i(c,"./index")]))throw"module '"+o+"' not found";u={id:c,exports:{}};try{return e[c]=u,a(u.exports,function(t){return n(t,r(c))},u),u.exports}catch(l){throw delete e[c],l}},i=function(t,e){var n,i,r=[];n=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=n.length;s>o;o++)i=n[o],".."==i?r.pop():"."!=i&&""!=i&&r.push(i);return r.join("/")},r=function(t){return t.split("/").slice(0,-1).join("/")};this.require=function(t){return n(t,"")},this.require.define=function(e){for(var n in e)t[n]=e[n]}}return this.require.define}.call(this)({andbang:function(t,e,n){!function(){function i(){this.callbacks={}}var r=this,o=Array.prototype.slice,s=function(t){return"[object Function]"==Object.prototype.toString.call(t)},a=function(t,e){for(var n in e)t[n]=e[n]};r.io||(r.io=e("socket.io-client")),i.prototype.on=function(t){var e=3===arguments.length,n=e?arguments[1]:void 0,i=e?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[t]=this.callbacks[t]||[]).push(i),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this.on(t,n),this},i.prototype.releaseGroup=function(t){var e,n,i,r;for(e in this.callbacks)for(r=this.callbacks[e],n=0,i=r.length;i>n;n++)r[n]._groupName===t&&(r.splice(n,1),n--,i--);return this},i.prototype.off=function(t,e){var n,i=this.callbacks[t];return i?1===arguments.length?(delete this.callbacks[t],this):(n=i.indexOf(e),i.splice(n,1),this):this},i.prototype.emit=function(t){var e,n,i=[].slice.call(arguments,1),r=this.callbacks[t],o=this.getWildcardCallbacks(t);if(r)for(e=0,n=r.length;n>e;++e)r[e].apply(this,i);if(o)for(e=0,n=o.length;n>e;++e)o[e].apply(this,[t].concat(i));return this},i.prototype.getWildcardCallbacks=function(t){var e,n,i=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[1].length)===n[1])&&(i=i.concat(this.callbacks[e]));return i};var c=function(t){var e=this.config={url:"https://api.andbang.com:443",transports:["websocket","flashsocket","htmlfile","xhr-multipart","xhr-polling","jsonp-polling"],reconnectAttempts:20,autoConnect:!0,autoSubscribe:!0};a(e,t),i.call(this),e.token&&e.autoConnect&&this.validateToken(e.token)};c.prototype=new i,c.prototype.validateToken=function(t,e){var n=this,i=arguments,r=e||function(){};this.connected?this.socket.emit("validateSession",t,function(t,e){e?(n.config.autoSubscribe&&n.socket.emit("subscribeTeams"),n.emit("ready",e),r(null,!0)):(n.emit("loginFailed"),r("Could not log in with token"))}):this.connect(function(){n.validateToken.apply(n,i)})},c.prototype.connect=function(t){var e=this,n=["editMember","online","offline","clearNotifications","editTeam","editTask","assignTask","deleteTask","shipTask","unshipTask","watchTask","unwatchTask","laterTask","unlaterTask","startTask","stopTask","sortTask","newTask","interaction","setLastReadNotification","setLastReadTeamChat","setLastReadDirectChat","setDirectChatState","resetLastInteraction","removeMember","notification","addMember","deleteInvite","chat","directChat"],i=0,o=n.length;for(this.socket=r.io.connect(this.config.url,{"max reconnection attempts":this.config.reconnectAttempts,transports:this.config.transports,"force new connection":!0}),this.socket.on("connect",function(){e.connected=!0,e.emit("connected"),t&&t()}),this.socket.on("disconnect",function(){e.connected=!1,e.emit("disconnected")}),this.socket.on("reconnect",function(){e.lastEvent&&setTimeout(function(){e.socket.emit("getEventsSinceId",e.lastEvent,function(t,n){t?(e.emit("staleReconnect"),e.disconnect()):n.forEach(function(t){e.emit(t.channel,t)})})},0)}),this.socket.on("error",function(t){"handshake unauthorized"===t&&e.emit("connectFail"),e.emit("error",t)});o>i;i++)this.socket.on(n[i],function(t){return function(n){n.eventNumber&&(e.lastEvent=n.eventNumber),e.emit(t,n)}}(n[i]))},c.prototype._callApi=function(t,e,n,i){var r=o.call(e),a=r[r.length-1],c=s(a)?a:null,u=c?o.call(r,0,r.length-1):r;i&&u.length!=n&&u.push({});var l=function(t,e,n){c&&("string"==typeof e?c(t,JSON.parse(e),n):c(t,e,n))};u.length?this.socket.emit(t,u,l):this.socket.emit(t,l)},c.prototype.disconnect=function(){this.socket.disconnect()},c.prototype.getMe=function(){this._callApi("getMe",arguments,0,!1)},c.prototype.updateMe=function(){this._callApi("updateMe",arguments,1,!1)},c.prototype.goOnline=function(){this._callApi("goOnline",arguments,0,!1)},c.prototype.goOffline=function(){this._callApi("goOffline",arguments,0,!1)},c.prototype.getMyTeams=function(){this._callApi("getMyTeams",arguments,0,!1)},c.prototype.getAllMyTeamData=function(){this._callApi("getAllMyTeamData",arguments,0,!1)},c.prototype.getMyNotifications=function(){this._callApi("getMyNotifications",arguments,1,!1)},c.prototype.clearMyNotifications=function(){this._callApi("clearMyNotifications",arguments,1,!1)},c.prototype.getTask=function(){this._callApi("getTask",arguments,2,!1)},c.prototype.updateTask=function(){this._callApi("updateTask",arguments,3,!1)},c.prototype.assignTask=function(){this._callApi("assignTask",arguments,3,!1)},c.prototype.deleteTask=function(){this._callApi("deleteTask",arguments,2,!1)},c.prototype.shipTask=function(){this._callApi("shipTask",arguments,2,!1)},c.prototype.unshipTask=function(){this._callApi("unshipTask",arguments,2,!1)},c.prototype.watchTask=function(){this._callApi("watchTask",arguments,2,!1)},c.prototype.unwatchTask=function(){this._callApi("unwatchTask",arguments,2,!1)},c.prototype.laterTask=function(){this._callApi("laterTask",arguments,2,!1)},c.prototype.unlaterTask=function(){this._callApi("unlaterTask",arguments,2,!1)},c.prototype.startTask=function(){this._callApi("startTask",arguments,2,!1)},c.prototype.stopTask=function(){this._callApi("stopTask",arguments,2,!1)},c.prototype.setTaskPosition=function(){this._callApi("setTaskPosition",arguments,3,!1)
},c.prototype.createTaskForMe=function(){this._callApi("createTaskForMe",arguments,2,!1)},c.prototype.createTaskForTeammate=function(){this._callApi("createTaskForTeammate",arguments,3,!1)},c.prototype.getAllTasks=function(){this._callApi("getAllTasks",arguments,1,!1)},c.prototype.getTeamShippedTasks=function(){this._callApi("getTeamShippedTasks",arguments,1,!1)},c.prototype.getMemberTasks=function(){this._callApi("getMemberTasks",arguments,2,!1)},c.prototype.getMemberLateredTasks=function(){this._callApi("getMemberLateredTasks",arguments,2,!1)},c.prototype.getMemberShippedTasks=function(){this._callApi("getMemberShippedTasks",arguments,3,!0)},c.prototype.getMemberWatchedTasks=function(){this._callApi("getMemberWatchedTasks",arguments,2,!1)},c.prototype.getMemberActiveTask=function(){this._callApi("getMemberActiveTask",arguments,2,!1)},c.prototype.getMyTasks=function(){this._callApi("getMyTasks",arguments,1,!1)},c.prototype.getMyLateredTasks=function(){this._callApi("getMyLateredTasks",arguments,1,!1)},c.prototype.getMyShippedTasks=function(){this._callApi("getMyShippedTasks",arguments,2,!0)},c.prototype.getMyWatchedTasks=function(){this._callApi("getMyWatchedTasks",arguments,1,!1)},c.prototype.getMyActiveTask=function(){this._callApi("getMyActiveTask",arguments,1,!1)},c.prototype.getTeamActiveTasks=function(){this._callApi("getTeamActiveTasks",arguments,1,!1)},c.prototype.getMember=function(){this._callApi("getMember",arguments,2,!1)},c.prototype.getMembers=function(){this._callApi("getMembers",arguments,1,!1)},c.prototype.setLastReadNotification=function(){this._callApi("setLastReadNotification",arguments,2,!1)},c.prototype.setLastReadTeamChat=function(){this._callApi("setLastReadTeamChat",arguments,2,!1)},c.prototype.setLastReadDirectChat=function(){this._callApi("setLastReadDirectChat",arguments,3,!1)},c.prototype.setDirectChatState=function(){this._callApi("setDirectChatState",arguments,3,!1)},c.prototype.resetLastInteraction=function(){this._callApi("resetLastInteraction",arguments,2,!1)},c.prototype.getInvite=function(){this._callApi("getInvite",arguments,2,!1)},c.prototype.getInvites=function(){this._callApi("getInvites",arguments,1,!1)},c.prototype.sendChat=function(){this._callApi("sendChat",arguments,2,!1)},c.prototype.sendDirectChat=function(){this._callApi("sendDirectChat",arguments,3,!1)},c.prototype.getChatHistory=function(){this._callApi("getChatHistory",arguments,2,!0)},c.prototype.getDirectChatHistory=function(){this._callApi("getDirectChatHistory",arguments,3,!0)},"undefined"!=typeof t?n.exports=c:r.AndBang=c}.call(this)},andlog:function(t,e,n){!function(e){var i=e.localStorage,r={},o="undefined"!=typeof process;if(o)return n.exports=console,void 0;if(i&&i.debug&&e.console)r=e.console;else for(var s="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a=s.length,c=function(){};a--;)r[s[a]]=c;"undefined"!=typeof t?n.exports=r:e.console=r}(this)},async:function(t,e,n){!function(){var t={},e=this,i=e.async;"undefined"!=typeof n&&n.exports?n.exports=t:e.async=t,t.noConflict=function(){return e.async=i,t};var r=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},o=function(t,e){if(t.map)return t.map(e);var n=[];return r(t,function(t,i,r){n.push(e(t,i,r))}),n},s=function(t,e,n){return t.reduce?t.reduce(e,n):(r(t,function(t,i,r){n=e(n,t,i,r)}),n)},a=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},c=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n+=1)if(t[n]===e)return n;return-1};t.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(t){setTimeout(t,0)},t.forEach=function(t,e,n){if(!t.length)return n();var i=0;r(t,function(r){e(r,function(e){e?(n(e),n=function(){}):(i+=1,i===t.length&&n())})})},t.forEachSeries=function(t,e,n){if(!t.length)return n();var i=0,r=function(){e(t[i],function(e){e?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})};r()};var u=function(e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[t.forEach].concat(n))}},l=function(e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[t.forEachSeries].concat(n))}},h=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n,i){r[t.index]=i,e(n)})},function(t){i(t,r)})};t.map=u(h),t.mapSeries=l(h),t.reduce=function(e,n,i,r){t.forEachSeries(e,function(t,e){i(n,t,function(t,i){n=i,e(t)})},function(t){r(t,n)})},t.inject=t.reduce,t.foldl=t.reduce,t.reduceRight=function(e,n,i,r){var s=o(e,function(t){return t}).reverse();t.reduce(s,n,i,r)},t.foldr=t.reduceRight;var f=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&r.push(t),e()})},function(){i(o(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};t.filter=u(f),t.filterSeries=l(f),t.select=t.filter,t.selectSeries=t.filterSeries;var p=function(t,e,n,i){var r=[];e=o(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||r.push(t),e()})},function(){i(o(r.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};t.reject=u(p),t.rejectSeries=l(p);var d=function(t,e,n,i){t(e,function(t,e){n(t,function(n){n?i(t):e()})},function(){i()})};t.detect=u(d),t.detectSeries=l(d),t.some=function(e,n,i){t.forEach(e,function(t,e){n(t,function(t){t&&(i(!0),i=function(){}),e()})},function(){i(!1)})},t.any=t.some,t.every=function(e,n,i){t.forEach(e,function(t,e){n(t,function(t){t||(i(!1),i=function(){}),e()})},function(){i(!0)})},t.all=t.every,t.sortBy=function(e,n,i){t.map(e,function(t,e){n(t,function(n,i){n?e(n):e(null,{value:t,criteria:i})})},function(t,e){if(t)return i(t);var n=function(t,e){var n=t.criteria,i=e.criteria;return i>n?-1:n>i?1:0};i(null,o(e.sort(n),function(t){return t.value}))})},t.auto=function(t,e){e=e||function(){};var n=a(t);if(!n.length)return e(null);var i=[],o=[],u=function(t){o.unshift(t)},l=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return o.splice(e,1),void 0},h=function(){r(o,function(t){t()})};u(function(){i.length===n.length&&e(null)}),r(n,function(n){var r=t[n]instanceof Function?[t[n]]:t[n],o=function(t){t?(e(t),e=function(){}):(i.push(n),h())},a=r.slice(0,Math.abs(r.length-1))||[],f=function(){return s(a,function(t,e){return t&&-1!==c(i,e)},!0)};if(f())r[r.length-1](o);else{var p=function(){f()&&(l(p),r[r.length-1](o))};u(p)}})},t.waterfall=function(e,n){if(!e.length)return n();n=n||function(){};var i=function(e){return function(r){if(r)n(r),n=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=e.next();s?o.push(i(s)):o.push(n),t.nextTick(function(){e.apply(null,o)})}}};i(t.iterator(e))()},t.parallel=function(e,n){if(n=n||function(){},e.constructor===Array)t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var i={};t.forEach(a(e),function(t,n){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,n(e)})},function(t){n(t,i)})}},t.series=function(e,n){if(n=n||function(){},e.constructor===Array)t.mapSeries(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var i={};t.forEachSeries(a(e),function(t,n){e[t](function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,n(e)})},function(t){n(t,i)})}},t.iterator=function(t){var e=function(n){var i=function(){return t.length&&t[n].apply(null,arguments),i.next()};return i.next=function(){return n<t.length-1?e(n+1):null},i};return e(0)},t.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var m=function(t,e,n,i){var r=[];t(e,function(t,e){n(t,function(t,n){r=r.concat(n||[]),e(t)})},function(t){i(t,r)})};t.concat=u(m),t.concatSeries=l(m),t.whilst=function(e,n,i){e()?n(function(r){return r?i(r):(t.whilst(e,n,i),void 0)}):i()},t.until=function(e,n,i){e()?i():n(function(r){return r?i(r):(t.until(e,n,i),void 0)})},t.queue=function(e,n){var i=0,r=[],o={concurrency:n,saturated:null,empty:null,drain:null,push:function(e,i){r.push({data:e,callback:i}),o.saturated&&r.length==n&&o.saturated(),t.nextTick(o.process)},process:function(){if(i<o.concurrency&&r.length){var t=r.splice(0,1)[0];o.empty&&0==r.length&&o.empty(),i+=1,e(t.data,function(){i-=1,t.callback&&t.callback.apply(t,arguments),o.drain&&0==r.length+i&&o.drain(),o.process()})}},length:function(){return r.length},running:function(){return i}};return o};var g=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&r(n,function(e){console[t](e)}))}]))}};t.log=g("log"),t.dir=g("dir"),t.memoize=function(t,e){var n={};return e=e||function(t){return t},function(){var i=Array.prototype.slice.call(arguments),r=i.pop(),o=e.apply(null,i);o in n?r.apply(null,n[o]):t.apply(null,i.concat([function(){n[o]=arguments,r.apply(null,arguments)}]))}}}()},backbone:function(t,e){!function(){var n,i=this,r=i.Backbone,o=[],s=o.push,a=o.slice,c=o.splice;n="undefined"!=typeof t?t:i.Backbone={},n.VERSION="1.0.0";var u=i._;u||"undefined"==typeof e||(u=e("underscore")),n.$=i.jQuery||i.Zepto||i.ender||i.$,n.noConflict=function(){return i.Backbone=r,this},n.emulateHTTP=!1,n.emulateJSON=!1;var l=n.Events={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var i=this,r=u.once(function(){i.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var i,r,o,s,a,c,l,h;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,c=s.length;c>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(l=0,h=o.length;h>l;l++)r=o[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&p(n,e),i&&p(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var o in i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},h=/\s+/,f=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(h.test(n)){for(var o=n.split(h),s=0,a=o.length;a>s;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},p=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};u.each(d,function(t,e){l[e]=function(e,n,i){var r=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[o]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),l.bind=l.on,l.unbind=l.off,u.extend(n,l);var m=n.Model=function(t,e){var n,i=t||{};e||(e={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(e,g)),e.parse&&(i=this.parse(i,e)||{}),(n=u.result(this,"defaults"))&&(i=u.defaults({},i,n)),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},g=["url","urlRoot","collection"];u.extend(m.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return u.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return u.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var i,r,o,s,a,c,l,h;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;o=n.unset,a=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=u.clone(this.attributes),this.changed={}),h=this.attributes,l=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(i in r)e=r[i],u.isEqual(h[i],e)||s.push(i),u.isEqual(l[i],e)?delete this.changed[i]:this.changed[i]=e,o?delete h[i]:h[i]=e;if(!a){s.length&&(this._pending=!0);for(var f=0,p=s.length;p>f;f++)this.trigger("change:"+s[f],this,h[s[f]],n)}if(c)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,u.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,u.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!u.isEmpty(this.changed):u.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?u.clone(this.changed):!1;var e,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)u.isEqual(i[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(t){t=t?u.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),e.trigger("sync",e,i,t),void 0):!1},B(this,t),this.sync("read",this,t)},save:function(t,e,n){var i,r,o,s=this.attributes;if(null==t||"object"==typeof t?(i=t,n=e):(i={})[t]=e,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=u.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=u.extend({},s,i)),void 0===n.parse&&(n.parse=!0);var a=this,c=n.success;return n.success=function(t){a.attributes=s;var e=a.parse(t,n);return n.wait&&(e=u.extend(i||{},e)),u.isObject(e)&&!a.set(e,n)?!1:(c&&c(a,t,n),a.trigger("sync",a,t,n),void 0)},B(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=i),o=this.sync(r,this,n),i&&n.wait&&(this.attributes=s),o},destroy:function(t){t=t?u.clone(t):{};var e=this,n=t.success,i=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(r){(t.wait||e.isNew())&&i(),n&&n(e,r,t),e.isNew()||e.trigger("sync",e,r,t)},this.isNew())return t.success(),!1;B(this,t);var r=this.sync("delete",this,t);return t.wait||i(),r},url:function(){var t=u.result(this,"urlRoot")||u.result(this.collection,"url")||L();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},u.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=u.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,u.extend(e||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(t){m.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),u[t].apply(u,e)}});var y=n.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,u.extend({silent:!0},e))},_={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};u.extend(y.prototype,l,{model:m,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return n.sync.apply(this,arguments)},add:function(t,e){return this.set(t,u.defaults(e||{},b))},remove:function(t,e){t=u.isArray(t)?t.slice():[t],e||(e={});var n,i,r,o;for(n=0,i=t.length;i>n;n++)o=this.get(t[n]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=u.defaults(e||{},_),e.parse&&(t=this.parse(t,e)),u.isArray(t)||(t=t?[t]:[]);var n,i,r,o,a,l=e.at,h=this.comparator&&null==l&&e.sort!==!1,f=u.isString(this.comparator)?this.comparator:null,p=[],d=[],m={};for(n=0,i=t.length;i>n;n++)(r=this._prepareModel(t[n],e))&&((o=this.get(r))?(e.remove&&(m[o.cid]=!0),e.merge&&(o.set(r.attributes,e),h&&!a&&o.hasChanged(f)&&(a=!0))):e.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(n=0,i=this.length;i>n;++n)m[(r=this.models[n]).cid]||d.push(r);d.length&&this.remove(d,e)}if(p.length&&(h&&(a=!0),this.length+=p.length,null!=l?c.apply(this.models,[l,0].concat(p)):s.apply(this.models,p)),a&&this.sort({silent:!0}),e.silent)return this;for(n=0,i=p.length;i>n;n++)(r=p[n]).trigger("add",r,this,e);return a&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),this.add(t,u.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,u.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,u.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return u.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,n){e||(e=this.comparator);var i=u.isFunction(e)?e:function(t){return t.get(e)};return u.sortedIndex(this.models,t,i,n)},pluck:function(t){return u.invoke(this.models,"get",t)},fetch:function(t){t=t?u.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var r=t.reset?"reset":"set";n[r](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},B(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?u.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,i=e.success;return e.success=function(r){e.wait&&n.add(t,e),i&&i(t,r,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof m)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(w,function(t){y.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),u[t].apply(u,e)}});var k=["groupBy","countBy","sortBy"];u.each(k,function(t){y.prototype[t]=function(e,n){var i=u.isFunction(e)?e:function(t){return t.get(e)};return u[t](this.models,i,n)}});var x=n.View=function(t){this.cid=u.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,A=["model","collection","el","id","attributes","className","tagName","events"];u.extend(x.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof n.$?t:n.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=u.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(u.isFunction(n)||(n=this[t[e]]),n){var i=e.match(T),r=i[1],o=i[2];n=u.bind(n,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,n):this.$el.on(r,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=u.extend({},u.result(this,"options"),t)),u.extend(this,u.pick(t,A)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var t=u.extend({},u.result(this,"attributes"));this.id&&(t.id=u.result(this,"id")),this.className&&(t["class"]=u.result(this,"className"));var e=n.$("<"+u.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),n.sync=function(t,e,i){var r=E[t];u.defaults(i||(i={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var o={type:r,dataType:"json"};if(i.url||(o.url=u.result(e,"url")||L()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",i.emulateJSON&&(o.data._method=r);var s=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),s?s.apply(this,arguments):void 0}}"GET"===o.type||i.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=n.ajax(u.extend(o,i));return e.trigger("request",e,a,i),a};var E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var j=n.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,O=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(j.prototype,l,{initialize:function(){},route:function(t,e,i){u.isRegExp(t)||(t=this._routeToRegExp(t)),u.isFunction(e)&&(i=e,e=""),i||(i=this[e]);var r=this;return n.history.route(t,function(o){var s=r._extractParameters(t,o);i&&i.apply(r,s),r.trigger.apply(r,["route:"+e].concat(s)),r.trigger("route",e,s),n.history.trigger("route",r,e,s)}),this},navigate:function(t,e){return n.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var t,e=u.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(S,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/]+)"}).replace(O,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return u.map(n,function(t){return t?decodeURIComponent(t):null})}});var N=n.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,$=/^\/+|\/+$/g,I=/msie [\w.]+/,R=/\/$/;N.started=!1,u.extend(N.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(R,"");t.indexOf(n)||(t=t.substr(n.length))}else t=this.getHash();return t.replace(P,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=u.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,r=I.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace($,"/"),r&&this._wantsHashChange&&(this.iframe=n.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?n.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?n.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(P,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){n.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),n=u.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return n},navigate:function(t,e){if(!N.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var n=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),n.history=new N;var F=function(t,e){var n,i=this;n=t&&u.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},u.extend(n,i,e);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&u.extend(n.prototype,t),n.__super__=i.prototype,n};m.extend=y.extend=j.extend=x.extend=N.extend=F;var L=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}}}.call(this)},clientconfig:function(t,e,n){var i=e("cookie-getter"),r=i("config");Object.freeze&&Object.freeze(r),document.cookie="config=;expires=Thu, 01 Jan 1970 00:00:00 GMT",n.exports=r},"cookie-getter":function(t,e,n){n.exports=function(t){var e,n=document.cookie,i=n.indexOf(t+"="),r=n.indexOf(";",i);return~i?(e=decodeURIComponent(n.substring(i,~r?r:void 0).split("=")[1]),"{"===e.charAt(0)?JSON.parse(e):e):null}},"emoji-images":function(t,e,n){!function(e,i){"object"==typeof t?n.exports=i():"function"==typeof define&&define.amd?define(i):e.returnExports=i()}(this,function(){function t(t,i,r){return t.replace(n,function(t){if(-1!==e.indexOf(t)){var n=String(t).slice(1,-1);return'<img class="emoji" title=":'+n+':" alt="'+n+'" src="'+i+"/"+encodeURIComponent(n)+'.png"'+(r?' height="'+r+'"':"")+" />"}return t})}var e=[":blush:",":scream:",":smirk:",":smiley:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":rage:",":disappointed:",":sob:",":kissing_heart:",":wink:",":pensive:",":confounded:",":flushed:",":relaxed:",":mask:",":heart:",":broken_heart:",":sunny:",":umbrella:",":cloud:",":snowflake:",":snowman:",":zap:",":cyclone:",":foggy:",":ocean:",":cat:",":dog:",":mouse:",":hamster:",":rabbit:",":wolf:",":frog:",":tiger:",":koala:",":bear:",":pig:",":pig_nose:",":cow:",":boar:",":monkey_face:",":monkey:",":horse:",":racehorse:",":camel:",":sheep:",":elephant:",":panda_face:",":snake:",":bird:",":baby_chick:",":hatched_chick:",":hatching_chick:",":chicken:",":penguin:",":turtle:",":bug:",":honeybee:",":ant:",":beetle:",":snail:",":octopus:",":tropical_fish:",":fish:",":whale:",":whale2:",":dolphin:",":cow2:",":ram:",":rat:",":water_buffalo:",":tiger2:",":rabbit2:",":dragon:",":goat:",":rooster:",":dog2:",":pig2:",":mouse2:",":ox:",":dragon_face:",":blowfish:",":crocodile:",":dromedary_camel:",":leopard:",":cat2:",":poodle:",":paw_prints:",":bouquet:",":cherry_blossom:",":tulip:",":four_leaf_clover:",":rose:",":sunflower:",":hibiscus:",":maple_leaf:",":leaves:",":fallen_leaf:",":herb:",":mushroom:",":cactus:",":palm_tree:",":evergreen_tree:",":deciduous_tree:",":chestnut:",":seedling:",":blossom:",":ear_of_rice:",":shell:",":globe_with_meridians:",":sun_with_face:",":full_moon_with_face:",":new_moon_with_face:",":new_moon:",":waxing_crescent_moon:",":first_quarter_moon:",":waxing_gibbous_moon:",":full_moon:",":waning_gibbous_moon:",":last_quarter_moon:",":waning_crescent_moon:",":last_quarter_moon_with_face:",":first_quarter_moon_with_face:",":moon:",":earth_africa:",":earth_americas:",":earth_asia:",":volcano:",":milky_way:",":partly_sunny:",":octocat:",":squirrel:",":bamboo:",":gift_heart:",":dolls:",":school_satchel:",":mortar_board:",":flags:",":fireworks:",":sparkler:",":wind_chime:",":rice_scene:",":jack_o_lantern:",":ghost:",":santa:",":christmas_tree:",":gift:",":bell:",":no_bell:",":tanabata_tree:",":tada:",":confetti_ball:",":balloon:",":crystal_ball:",":cd:",":dvd:",":floppy_disk:",":camera:",":video_camera:",":movie_camera:",":computer:",":tv:",":iphone:",":phone:",":telephone:",":telephone_receiver:",":pager:",":fax:",":minidisc:",":vhs:",":sound:",":speaker:",":mute:",":loudspeaker:",":mega:",":hourglass:",":hourglass_flowing_sand:",":alarm_clock:",":watch:",":radio:",":satellite:",":loop:",":mag:",":mag_right:",":unlock:",":lock:",":lock_with_ink_pen:",":closed_lock_with_key:",":key:",":bulb:",":flashlight:",":high_brightness:",":low_brightness:",":electric_plug:",":battery:",":calling:",":email:",":mailbox:",":postbox:",":bath:",":bathtub:",":shower:",":toilet:",":wrench:",":nut_and_bolt:",":hammer:",":seat:",":moneybag:",":yen:",":dollar:",":pound:",":euro:",":credit_card:",":money_with_wings:",":e-mail:",":inbox_tray:",":outbox_tray:",":envelope:",":incoming_envelope:",":postal_horn:",":mailbox_closed:",":mailbox_with_mail:",":mailbox_with_no_mail:",":door:",":smoking:",":bomb:",":gun:",":hocho:",":pill:",":syringe:",":page_facing_up:",":page_with_curl:",":bookmark_tabs:",":bar_chart:",":chart_with_upwards_trend:",":chart_with_downwards_trend:",":scroll:",":clipboard:",":calendar:",":date:",":card_index:",":file_folder:",":open_file_folder:",":scissors:",":pushpin:",":paperclip:",":black_nib:",":pencil2:",":straight_ruler:",":triangular_ruler:",":closed_book:",":green_book:",":blue_book:",":orange_book:",":notebook:",":notebook_with_decorative_cover:",":ledger:",":books:",":bookmark:",":name_badge:",":microscope:",":telescope:",":newspaper:",":football:",":basketball:",":soccer:",":baseball:",":tennis:",":8ball:",":rugby_football:",":bowling:",":golf:",":mountain_bicyclist:",":bicyclist:",":horse_racing:",":snowboarder:",":swimmer:",":surfer:",":ski:",":spades:",":hearts:",":clubs:",":diamonds:",":gem:",":ring:",":trophy:",":musical_score:",":musical_keyboard:",":violin:",":space_invader:",":video_game:",":black_joker:",":flower_playing_cards:",":game_die:",":dart:",":mahjong:",":clapper:",":memo:",":pencil:",":book:",":art:",":microphone:",":headphones:",":trumpet:",":saxophone:",":guitar:",":shoe:",":sandal:",":high_heel:",":lipstick:",":boot:",":shirt:",":tshirt:",":necktie:",":womans_clothes:",":dress:",":running_shirt_with_sash:",":jeans:",":kimono:",":bikini:",":ribbon:",":tophat:",":crown:",":womans_hat:",":mans_shoe:",":closed_umbrella:",":briefcase:",":handbag:",":pouch:",":purse:",":eyeglasses:",":fishing_pole_and_fish:",":coffee:",":tea:",":sake:",":baby_bottle:",":beer:",":beers:",":cocktail:",":tropical_drink:",":wine_glass:",":fork_and_knife:",":pizza:",":hamburger:",":fries:",":poultry_leg:",":meat_on_bone:",":spaghetti:",":curry:",":fried_shrimp:",":bento:",":sushi:",":fish_cake:",":rice_ball:",":rice_cracker:",":rice:",":ramen:",":stew:",":oden:",":dango:",":egg:",":bread:",":doughnut:",":custard:",":icecream:",":ice_cream:",":shaved_ice:",":birthday:",":cake:",":cookie:",":chocolate_bar:",":candy:",":lollipop:",":honey_pot:",":apple:",":green_apple:",":tangerine:",":lemon:",":cherries:",":grapes:",":watermelon:",":strawberry:",":peach:",":melon:",":banana:",":pear:",":pineapple:",":sweet_potato:",":eggplant:",":tomato:",":corn:",":alien:",":angel:",":anger:",":angry:",":anguished:",":astonished:",":baby:",":blue_heart:",":blush:",":boom:",":bow:",":bowtie:",":boy:",":bride_with_veil:",":broken_heart:",":bust_in_silhouette:",":busts_in_silhouette:",":clap:",":cold_sweat:",":collision:",":confounded:",":confused:",":construction_worker:",":cop:",":couple_with_heart:",":couple:",":couplekiss:",":cry:",":crying_cat_face:",":cupid:",":dancer:",":dancers:",":dash:",":disappointed:",":dizzy_face:",":dizzy:",":droplet:",":ear:",":exclamation:",":expressionless:",":eyes:",":facepunch:",":family:",":fearful:",":feelsgood:",":feet:",":finnadie:",":fire:",":fist:",":flushed:",":frowning:",":girl:",":goberserk:",":godmode:",":green_heart:",":grey_exclamation:",":grey_question:",":grimacing:",":grin:",":grinning:",":guardsman:",":haircut:",":hand:",":hankey:",":hear_no_evil:",":heart_eyes_cat:",":heart_eyes:",":heart:",":heartbeat:",":heartpulse:",":hurtrealbad:",":hushed:",":imp:",":information_desk_person:",":innocent:",":japanese_goblin:",":japanese_ogre:",":joy_cat:",":joy:",":kiss:",":kissing_cat:",":kissing_closed_eyes:",":kissing_heart:",":kissing_smiling_eyes:",":kissing:",":laughing:",":lips:",":love_letter:",":man_with_gua_pi_mao:",":man_with_turban:",":man:",":mask:",":massage:",":metal:",":muscle:",":musical_note:",":nail_care:",":neckbeard:",":neutral_face:",":no_good:",":no_mouth:",":nose:",":notes:",":ok_hand:",":ok_woman:",":older_man:",":older_woman:",":open_hands:",":open_mouth:",":pensive:",":persevere:",":person_frowning:",":person_with_blond_hair:",":person_with_pouting_face:",":point_down:",":point_left:",":point_right:",":point_up_2:",":point_up:",":poop:",":pouting_cat:",":pray:",":princess:",":punch:",":purple_heart:",":question:",":rage:",":rage1:",":rage2:",":rage3:",":rage4:",":raised_hand:",":raised_hands:",":relaxed:",":relieved:",":revolving_hearts:",":runner:",":running:",":satisfied:",":scream_cat:",":scream:",":see_no_evil:",":shit:",":skull:",":sleeping:",":sleepy:",":smile_cat:",":smile:",":smiley_cat:",":smiley:",":smiling_imp:",":smirk_cat:",":smirk:",":sob:",":sparkling_heart:",":sparkles:",":speak_no_evil:",":speech_balloon:",":star:",":star2:",":stuck_out_tongue_closed_eyes:",":stuck_out_tongue_winking_eye:",":stuck_out_tongue:",":sunglasses:",":suspect:",":sweat_drops:",":sweat_smile:",":sweat:",":thought_balloon:",":-1:",":thumbsdown:",":thumbsup:",":+1:",":tired_face:",":tongue:",":triumph:",":trollface:",":two_hearts:",":two_men_holding_hands:",":two_women_holding_hands:",":unamused:",":v:",":walking:",":wave:",":weary:",":wink2:",":wink:",":woman:",":worried:",":yellow_heart:",":yum:",":zzz:",":109:",":house:",":house_with_garden:",":school:",":office:",":post_office:",":hospital:",":bank:",":convenience_store:",":love_hotel:",":hotel:",":wedding:",":church:",":department_store:",":european_post_office:",":city_sunrise:",":city_sunset:",":japanese_castle:",":european_castle:",":tent:",":factory:",":tokyo_tower:",":japan:",":mount_fuji:",":sunrise_over_mountains:",":sunrise:",":stars:",":statue_of_liberty:",":bridge_at_night:",":carousel_horse:",":rainbow:",":ferris_wheel:",":fountain:",":roller_coaster:",":ship:",":speedboat:",":boat:",":sailboat:",":rowboat:",":anchor:",":rocket:",":airplane:",":helicopter:",":steam_locomotive:",":tram:",":mountain_railway:",":bike:",":aerial_tramway:",":suspension_railway:",":mountain_cableway:",":tractor:",":blue_car:",":oncoming_automobile:",":car:",":red_car:",":taxi:",":oncoming_taxi:",":articulated_lorry:",":bus:",":oncoming_bus:",":rotating_light:",":police_car:",":oncoming_police_car:",":fire_engine:",":ambulance:",":minibus:",":truck:",":train:",":station:",":train2:",":bullettrain_front:",":bullettrain_side:",":light_rail:",":monorail:",":railway_car:",":trolleybus:",":ticket:",":fuelpump:",":vertical_traffic_light:",":traffic_light:",":warning:",":construction:",":beginner:",":atm:",":slot_machine:",":busstop:",":barber:",":hotsprings:",":checkered_flag:",":crossed_flags:",":izakaya_lantern:",":moyai:",":circus_tent:",":performing_arts:",":round_pushpin:",":triangular_flag_on_post:",":jp:",":kr:",":cn:",":us:",":fr:",":es:",":it:",":ru:",":gb:",":uk:",":de:",":100:",":1234:",":one:",":two:",":three:",":four:",":five:",":six:",":seven:",":eight:",":nine:",":keycap_ten:",":zero:",":hash:",":symbols:",":arrow_backward:",":arrow_down:",":arrow_forward:",":arrow_left:",":capital_abcd:",":abcd:",":abc:",":arrow_lower_left:",":arrow_lower_right:",":arrow_right:",":arrow_up:",":arrow_upper_left:",":arrow_upper_right:",":arrow_double_down:",":arrow_double_up:",":arrow_down_small:",":arrow_heading_down:",":arrow_heading_up:",":leftwards_arrow_with_hook:",":arrow_right_hook:",":left_right_arrow:",":arrow_up_down:",":arrow_up_small:",":arrows_clockwise:",":arrows_counterclockwise:",":rewind:",":fast_forward:",":information_source:",":ok:",":twisted_rightwards_arrows:",":repeat:",":repeat_one:",":new:",":top:",":up:",":cool:",":free:",":ng:",":cinema:",":koko:",":signal_strength:",":u5272:",":u5408:",":u55b6:",":u6307:",":u6708:",":u6709:",":u6e80:",":u7121:",":u7533:",":u7a7a:",":u7981:",":sa:",":restroom:",":mens:",":womens:",":baby_symbol:",":no_smoking:",":parking:",":wheelchair:",":metro:",":baggage_claim:",":accept:",":wc:",":potable_water:",":put_litter_in_its_place:",":secret:",":congratulations:",":m:",":passport_control:",":left_luggage:",":customs:",":ideograph_advantage:",":cl:",":sos:",":id:",":no_entry_sign:",":underage:",":no_mobile_phones:",":do_not_litter:",":non-potable_water:",":no_bicycles:",":no_pedestrians:",":children_crossing:",":no_entry:",":eight_spoked_asterisk:",":eight_pointed_black_star:",":heart_decoration:",":vs:",":vibration_mode:",":mobile_phone_off:",":chart:",":currency_exchange:",":aries:",":taurus:",":gemini:",":cancer:",":leo:",":virgo:",":libra:",":scorpius:",":sagittarius:",":capricorn:",":aquarius:",":pisces:",":ophiuchus:",":six_pointed_star:",":negative_squared_cross_mark:",":a:",":b:",":ab:",":o2:",":diamond_shape_with_a_dot_inside:",":recycle:",":end:",":on:",":soon:",":clock1:",":clock130:",":clock10:",":clock1030:",":clock11:",":clock1130:",":clock12:",":clock1230:",":clock2:",":clock230:",":clock3:",":clock330:",":clock4:",":clock430:",":clock5:",":clock530:",":clock6:",":clock630:",":clock7:",":clock730:",":clock8:",":clock830:",":clock9:",":clock930:",":heavy_dollar_sign:",":copyright:",":registered:",":tm:",":x:",":heavy_exclamation_mark:",":bangbang:",":interrobang:",":o:",":heavy_multiplication_x:",":heavy_plus_sign:",":heavy_minus_sign:",":heavy_division_sign:",":white_flower:",":heavy_check_mark:",":ballot_box_with_check:",":radio_button:",":link:",":curly_loop:",":wavy_dash:",":part_alternation_mark:",":trident:",":black_square:",":white_square:",":white_check_mark:",":black_square_button:",":white_square_button:",":black_circle:",":white_circle:",":red_circle:",":large_blue_circle:",":large_blue_diamond:",":large_orange_diamond:",":small_blue_diamond:",":small_orange_diamond:",":small_red_triangle:",":small_red_triangle_down:",":shipit:"],n=/\:[a-z0-9_\-\+]+\:/g;
return t})},isMobile:function(t,e,n){n.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:!1}},keymaster:function(t,e,n){!function(t){function e(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(t,n){var i,r,o,a,c;if(i=t.keyCode,-1==e(w,i)&&w.push(i),(93==i||224==i)&&(i=91),i in v){v[i]=!0;for(o in _)_[o]==i&&(s[o]=!0)}else if(s.filter.call(this,t)&&i in g)for(a=0;a<g[i].length;a++)if(r=g[i][a],r.scope==n||"all"==r.scope){c=r.mods.length>0;for(o in v)(!v[o]&&e(r.mods,+o)>-1||v[o]&&-1==e(r.mods,+o))&&(c=!1);(0!=r.mods.length||v[16]||v[18]||v[17]||v[91])&&!c||r.method(t,r)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function r(t){var n,i=t.keyCode,r=e(w,i);if(r>=0&&w.splice(r,1),(93==i||224==i)&&(i=91),i in v){v[i]=!1;for(n in _)_[n]==i&&(s[n]=!1)}}function o(){for(m in v)v[m]=!1;for(m in _)s[m]=!1}function s(t,e,n){var i,r,o,s;for(void 0===n&&(n=e,e="all"),t=t.replace(/\s/g,""),i=t.split(","),""==i[i.length-1]&&(i[i.length-2]+=","),o=0;o<i.length;o++){if(r=[],t=i[o].split("+"),t.length>1){for(r=t.slice(0,t.length-1),s=0;s<r.length;s++)r[s]=_[r[s]];t=[t[t.length-1]]}t=t[0],t=b[t]||t.toUpperCase().charCodeAt(0),t in g||(g[t]=[]),g[t].push({shortcut:i[o],scope:e,method:n,key:i[o],mods:r})}}function a(t){if("string"==typeof t){if(1!=t.length)return!1;t=t.toUpperCase().charCodeAt(0)}return-1!=e(w,t)}function c(){return w}function u(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)}function l(t){y=t||"all"}function h(){return y||"all"}function f(t){var e,n,i;for(e in g)for(n=g[e],i=0;i<n.length;)n[i].scope===t?n.splice(i,1):i++}function p(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,function(){n(window.event)})}function d(){var e=t.key;return t.key=k,e}var m,g={},v={16:!1,18:!1,17:!1,91:!1},y="all",_={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},b={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},w=[];for(m=1;20>m;m++)_["f"+m]=111+m;for(m in _)s[m]=!1;p(document,"keydown",function(t){i(t,y)}),p(document,"keyup",r),p(window,"focus",o);var k=t.key;t.key=s,t.key.setScope=l,t.key.getScope=h,t.key.deleteScope=f,t.key.filter=u,t.key.isPressed=a,t.key.getPressedKeyCodes=c,t.key.noConflict=d,"undefined"!=typeof n&&(n.exports=key)}(this),key.filter=function(t){var e=t.target||t.srcElement,n=e.tagName;return("INPUT"==n||"SELECT"==n||"TEXTAREA"==n)&&(t.isInput=!0,t.inputWithContent=!!e.value),t.element=e,!0},key.noConflict()},"loading-stats":function(t,e,n){var i=window.times,r={};n.exports={recordTime:function(t){i[t]=new Date},recordStat:function(t,e){r[t]=e},getSummary:function(){for(var t in i)"start"!==t&&(r[t]=this.sinceStart(i[t]));return r},sinceStart:function(t){var e=t||new Date;return e-i.start}}},"node-uuid":function(t,e,n){!function(){function t(t){var e=new o(16),n=0;return t.toUpperCase().replace(/[0-9A-F][0-9A-F]/g,function(t){e[n++]=c[t]}),e}function e(t){var e=a,n=t;return e[n[0]]+e[n[1]]+e[n[2]]+e[n[3]]+"-"+e[n[4]]+e[n[5]]+"-"+e[n[6]]+e[n[7]]+"-"+e[n[8]]+e[n[9]]+"-"+e[n[10]]+e[n[11]]+e[n[12]]+e[n[13]]+e[n[14]]+e[n[15]]}function i(t,n,i){var a=4294967296,c=255,u="binary"!=t?s:n?n:new o(16),l=n&&i||0;return r=Math.random()*a,u[l++]=r&c,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,r=Math.random()*a,u[l++]=r&c,u[l++]=(r>>>=8)&c,u[l++]=64|15&(r>>>=8),u[l++]=(r>>>=8)&c,r=Math.random()*a,u[l++]=128|63&r,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,r=Math.random()*a,u[l++]=r&c,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,u[l++]=(r>>>=8)&c,void 0===t?e(u):u}for(var o="function"==typeof Buffer?Buffer:Array,s=new o(16),a=[],c={},u=0;256>u;u++)a[u]=(u+256).toString(16).substr(1).toUpperCase(),c[a[u]]=u;i.parse=t,i.unparse=e,i.BufferClass=o,"undefined"!=typeof n?n.exports=i:this.uuid=i}()},smartcollection:function(t,e,n){var i,r=e("underscore"),o=e("backbone");n.exports=i=function(t){r.defaults(t,{filters:{},sortProperty:"sortOrder",ordered:!1}),t.model&&t.listProperty&&(this.explicitlyListed=!0),t.comparator?this.comparator=t.comparator:t.model&&t.listProperty&&t.explicitlySorted&&(this.explicitlySorted=!0),r.extend(this,t,o.Events),this.listenTo(this.collection,"all",r.bind(this.eventPassthrough,this)),this.listenTo(this.collection,"all",r.bind(this.handleUnderlyingChange,this)),this.listenTo(this.collection,"add",r.bind(this.handleAdd,this)),this.model&&this.sortProperty&&this.listenTo(this.model,"change:"+this.sortProperty,r.bind(this.trigger,this,"refresh")),this.initialize.apply(this,arguments)},r.extend(i.prototype,{initialize:function(){},eventPassthrough:function(t,e){!r.contains(["remove","reset"],t)||e&&!this.matchesFilters(e)||this.trigger.call(this,t,arguments)},handleUnderlyingChange:function(t){var e="change"===t.slice(0,6)?t.slice(7):void 0;r(r.keys(this.filters)).contains(e)&&this.trigger("refresh"),"refresh"===t&&this.trigger("refresh")},handleAdd:function(t){var e=this,n=r.toArray(arguments),i=this.models();this.matchesFilters(t)&&(n.unshift("add"),this.trigger.apply(this,n)),this.retestOnAll&&i.forEach(function(t){e.matchesFilters(t)||e.trigger("remove",t,e)})},toJSON:function(){return r.map(this.models(),function(t){return t.toJSON})},addFilter:function(t){r(this.filters).extend(t),this.trigger("refresh")},removeFilter:function(t){delete this.filters[t],this.trigger("refresh")},matchesFilters:function(t){var e,n,i,o="string"==typeof t?this.collection.get(t):t;for(e in this.filters)if(n=this.filters[e],i=o&&o.get(e),r.isFunction(n)){if(!n(o))return!1}else if(r.isBoolean(n)){if(i=!!i,n!=i)return!1}else if(i!==n)return!1;return!0},models:function(){var t,e=this;return t=this.explicitlyListed?r.filter(this.getExplicit(),r.bind(this.matchesFilters,this)):this.collection.filter(function(t){return e.matchesFilters(t)}),this.comparator?r.sortBy(t,this.comparator):t},getExplicit:function(){var t=this;return r.chain(this.model.get(this.listProperty)).map(function(e){return t.collection.get&&t.collection.get(e)||t.collection.find(function(t){t.id==e})}).compact().value()},get:function(){return r(this.models()).find(function(t){return t.id})},length:function(){return this.models().length},at:function(t){return this.models()[t]},next:function(t,e){var n="string"==typeof t?this.collection.get(t):t,i=this.models(),o=n?r(i).indexOf(n):-1,s=i.length;return o===e?i[e]:s>0?-1===o||s===o+1||1===s?i[0]:i[o+1]:void 0},prev:function(t){var e="string"==typeof t?this.collection.get(t):t,n=this.models(),i=e?r(n).indexOf(e):-1,o=n.length;return o>0?-1===i||0===i||1===o?r(n).last():n[i-1]:void 0}});var s=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];r.each(s,function(t){i.prototype[t]=function(){return r[t].apply(r,[this.models()].concat(r.toArray(arguments)))}})},"sound-effect-manager":function(t,e,n){!function(){function t(){this.support=!!window.webkitAudioContext,this.support&&(this.context=new webkitAudioContext),this.sounds={}}var e=this;t.prototype.loadFile=function(t,e,n,i){this.support?this._loadWebAudioFile(t,e,n,i):this._loadWaveFile(t.replace(".mp3",".wav"),e,n,3,i)},t.prototype._loadWebAudioFile=function(t,e,n,i){if(this.support){var r=this,o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){r.sounds[e]=r.context.createBuffer(o.response,!0),i&&i()},setTimeout(function(){o.send()},n||0)}},t.prototype._loadWaveFile=function(t,e,n,i,r){var o=this,s=i||3;setTimeout(function(){var n,i=0;for(o.sounds[e]=[];s>i;)n=new Audio,n.src=t,0===i&&r&&n.addEventListener("canplaythrough",r,!1),n.load(),o.sounds[e][i++]=n},n||0)},t.prototype._playWebAudio=function(t){var e,n=this.sounds[t];n&&(e=this.context.createBufferSource(),e.buffer=n,e.connect(this.context.destination),e.noteOn(0))},t.prototype._playWavAudio=function(t,e){var n,i=this.sounds[t],r=i&&i.length||0,o=0;if(i)for(;r>o;){if(n=i[o++],n.error)return;if(0===n.currentTime||n.currentTime===n.duration)return n.currentTime=0,n.loop=!!e,o=r,n.play()}},t.prototype.play=function(t,e){return this.support?(this._playWebAudio(t,e),void 0):this._playWavAudio(t,e)},t.prototype.stop=function(t){if(this.support);else for(var e,n=this.sounds[t],i=n&&n.length||0,r=0;i>r;)e=n[r++],e.pause(),e.currentTime=0},"undefined"!=typeof n?n.exports=t:"function"==typeof e.define&&define.amd?e.define(t):e.SoundEffectManager=t}()},strictmodel:function(t,e){!function(){"use strict";var n=this,i="undefined"!=typeof t?t:n.Strict={};Object.prototype.toString,Array.prototype.slice,i.VERSION="0.0.1";var r=n._;r||"undefined"==typeof e||(r=e("underscore"));var o=n.Backbone;o||"undefined"==typeof e||(o=e("backbone")),o.Collection.prototype._prepareModel=function(t,e){if(t instanceof i.Model)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var n=new this.model(t,e);return n._validate(t,e)?n:(this.trigger("invalid",this,t,e),!1)};var s=function(){},a=function(t,e,n){var i;return i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r.extend(i,t),s.prototype=t.prototype,i.prototype=new s,e&&r.extend(i.prototype,e),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=t.prototype,i},c=function(t,e){var n=a(this,t,e);return n.extend=this.extend,n},u=i.Mixins={define:function(t,e){Object.defineProperty(this,t,e)},defineGetter:function(t,e){this.define(t,{get:e.bind(this)})},defineSetter:function(t,e){this.define(t,{set:e.bind(this)})}},l=i.Registry=function(){this._cache={},this._namespaces={}};r.extend(l.prototype,{_getCache:function(t){return t?(this._namespaces[t]||(this._namespaces[t]={}),this._namespaces[t]):this._cache},lookup:function(t,e,n){var i=this._getCache(n);return i&&i[t+e]},store:function(t){var e=this._getCache(t._namespace),n=t.type+t.id;return e[n]=e[n]||t,this},remove:function(t,e,n){var i=this._getCache(n);return this.lookup.apply(this,arguments)?(delete i[t+e],!0):!1},clear:function(){this._cache={},this._namespaces={}}}),i.registry=new l;var h=i.Model=function(t,e){t=t||{},e=e||{};var n=r.defaults(e||{},{seal:!0});this._namespace=n.namespace,this._initted=!1,this._deps={},this._initProperties(),this._initCollections(),this._cache={},this._verifyRequired(),this.set(t,{silent:!0}),this.init.apply(this,arguments),t.id&&i.registry.store(this),this._previous=r.clone(this.attributes),this._initted=!0};r.extend(h.prototype,o.Events,u,{idAttribute:"id",idDefinition:{type:"number",setOnce:!0},init:function(){return this},remove:function(){return this.id&&i.registry.remove(this.type,this.id,this._namespace),this.trigger("remove",this),this.off(),this},set:function(t,e,n){var i,o,s,a,c,u,l,h=this,f=(h._changing,[]);h._changing=!0,r.isObject(t)||null===t?(u=t,n=e):(u={},u[t]=e),i=n||{};for(c in u){if(l=u[c],o=typeof l,s=l,a=this.definition[c]||{},"date"===a.type)if(r.isDate(l))o="date",s=l.valueOf();else try{s=new Date(parseInt(l,10)).valueOf(),o="date"}catch(p){o=typeof l}else"array"===a.type?o=r.isArray(l)?"array":typeof l:"object"===a.type&&"object"!=typeof l&&r.isUndefined(l)&&(s=null,o="object");if(a.type&&a.type!==o&&!a.required&&!r.isUndefined(l))throw new TypeError("Property '"+c+"' must be of type "+a.type+". Tried to set "+l);if(a.setOnce&&void 0!==a.value&&!r.isEqual(a.value,s))throw new TypeError("Property '"+t+"' can only be set once.");r.isEqual(a.value,s)||(h._previous&&(h._previous[c]=a.value),a.value=s,f.push(c))}r.each(f,function(t){i.silent||h.trigger("change:"+t,h,h[t]),(h._deps[t]||[]).forEach(function(t){delete h._cache[t],i.silent||h.trigger("change:"+t,h,h.derived[t])})}),f.length&&(i.silent||h.trigger("change",h))},get:function(t){return this[t]},addListVal:function(t,e,n){var i=r.clone(this[t])||[];return r(i).contains(e)||(i[n?"unshift":"push"](e),this[t]=i),this},previous:function(t){return t?this._previous[t]:r.clone(this._previous)},removeListVal:function(t,e){var n=r.clone(this[t])||[];return r(n).contains(e)&&(this[t]=r(n).without(e)),this},hasListVal:function(t,e){return r.contains(this[t]||[],e)},_initCollections:function(){var t;if(this.collections)for(t in this.collections)this[t]=new this.collections[t],this[t].parent=this},_verifyRequired:function(){var t=this.attributes;for(var e in this.definition)if(this.definition[e].required&&"undefined"==typeof t[e])return!1;return!0},_initProperties:function(){function t(t,e,n){var a=s[t]={};r.isString(e)?(i=o._ensureValidType(e),i&&(a.type=i)):(i=o._ensureValidType(e[0]||e.type),i&&(a.type=i),(e[1]||e.required)&&(a.required=!0),a.value=r.isUndefined(e[2])?e.default:e[2],n&&(a.session=!0),e.setOnce&&(a.setOnce=!0))}var e,n,i,o=this,s=this.definition={};this.cid=r.uniqueId("model");for(n in this.props)t(n,this.props[n]);for(e in this.session)t(e,this.session[e],!0);s.id?s[this.idAttribute].setOnce=!0:t(this.idAttribute,this.idDefinition),this._registerDerived(),this._createGettersSetters(),this.session&&Object.freeze(this.session),this.props&&Object.freeze(this.props)},_ensureValidType:function(t){return r.contains(["string","number","boolean","array","object","date"],t)?t:void 0},_validate:function(){return!0},_createGettersSetters:function(){var t,e,n,i=this;for(t in this.definition)e=this.definition[t],n={},n.set=function(t,e){return function(t){i.set(e,t)}}(e,t),n.get=function(t){return function(){return"undefined"!=typeof t.value?"date"===t.type?new Date(t.value):t.value:void 0}}(e),this.define(t,n);this.defineGetter("attributes",function(){var t={};for(var e in this.definition)t[e]=this[e];return t}),this.defineGetter("keys",function(){return Object.keys(this.attributes)}),this.defineGetter("json",function(){return JSON.stringify(this._getAttributes(!1,!0))}),this.defineGetter("derived",function(){var t={};for(var e in this._derived)t[e]=this._derived[e].fn.apply(this);return t}),this.defineGetter("toTemplate",function(){return r.extend(this._getAttributes(!0),this.derived)})},_getAttributes:function(t,e){var n={};for(var i in this.definition)t?n[i]=e?this.definition[i].value:this[i]:this.definition[i].session||(n[i]=e?this.definition[i].value:this[i]);return n},_registerDerived:function(){var t,e=this;if(this.derived){this._derived=this.derived;for(var n in this.derived)t=this.derived[n].deps||[],r.each(t,function(t){e._deps[t]=r(e._deps[t]||[]).union([n])}),this.define(n,{get:r.bind(function(t){return this._derived[t].cache?this._cache.hasOwnProperty(t)?this._cache[t]:this._cache[t]=this._derived[t].fn.apply(this):this._derived[t].fn.apply(this)},this,n),set:r.bind(function(t){var e=this._derived[t].deps,n='"'+t+"\" is a derived property, you can't set it directly.";throw e&&e.length?new TypeError(n+' It is dependent on "'+e.join('" and "')+'".'):new TypeError(n)},this,n)})}}}),i.Model.extend=c,o.Model=i.Model}.call(this)},strictview:function(t,e,n){var i=e("backbone"),r=e("underscore"),o=e("templates");n.exports=i.View.extend({handleBindings:function(){var t=this;return this.contentBindings&&r.each(this.contentBindings,function(e,n){var i=function(){var i=e.length>0?t.$(e):$(t.el);i.html(t.model[n])};t.listenTo(t.model,"change:"+n,i),i()}),this.imageBindings&&r.each(this.imageBindings,function(e,n){var i=function(){var i=e.length>0?t.$(e):$(t.el);i.attr("src",t.model[n])};t.listenTo(t.model,"change:"+n,i),i()}),this.hrefBindings&&r.each(this.hrefBindings,function(e,n){var i=function(){var i=e.length>0?t.$(e):$(t.el);i.attr("href",t.model[n])};t.listenTo(t.model,"change:"+n,i),i()}),this.classBindings&&r.each(this.classBindings,function(e,n){var i=function(){var i=t.model[n],o=t.model.previous(),s=r.isFunction(o)?o(n):o[n],a=e.length>0?t.$(e):$(t.el);r.isBoolean(i)?i?a.addClass(n):a.removeClass(n):(s&&a.removeClass(s),a.addClass(i))};t.listenTo(t.model,"change:"+n,i),i()}),this.inputBindings&&r.each(this.inputBindings,function(e,n){var i=function(){var i=e.length>0?t.$(e):$(t.el);i.val(t.model[n])};t.listenTo(t.model,"change:"+n,i),i()}),this},desist:function(t){t||(t={}),r.defaults(t,{quick:!1,animate:!0,speed:300,animationProps:{height:0,opacity:0}});var e=$(this.el),n=r.bind(this.remove,this);this.interval&&(clearInterval(this.interval),delete this.interval),t.quick?n():t.animate?e.animate(t.animationProps,{speed:t.speed,complete:n}):setTimeout(n,t.speed)},addReferences:function(t){for(var e in t)this["$"+e]=$(t[e],this.el)},basicRender:function(t){var e;t||(t={}),r.defaults(t,{templateFunc:"string"==typeof this.template?o[t.templateKey]:this.template,context:!1}),e=$(t.templateFunc(t.contex)),$(this.el).replaceWith(e),this.setElement(e),this.handleBindings(),this.delegateEvents()},subViewRender:function(t){t||(t={}),r.defaults(t,{placement:"append",templateFunc:"string"==typeof this.template?o[t.templateKey]:this.template});var e=(r.isFunction(this.model.toTemplate)?this.model.toTemplate():this.model.toTemplate,$(t.templateFunc(t.context))[0]);this.el.parentNode?$(this.el).replaceWith(e):$(this.containerEl)[t.placement](e),this.setElement(e),this.handleBindings()},bindomatic:function(t,e,n,i){var o=r.bind(n,this);this.listenTo(t,e,o),(i&&i.trigger||i===!0)&&o()},collectomatic:function(t,e,n,i){function o(t){var i=c.matchesFilters?c.matchesFilters(t):!0;i&&(a[t.cid]=new e(r({model:t}).extend(n)),a[t.cid].parent=c)}var s,a={},c=this;this.listenTo(t,"add",o),this.listenTo(t,"remove",function(t){a[t.cid]&&(a[t.cid].desist(i),delete a[t.cid])}),this.listenTo(t,"move",function(){r(a).each(function(t){t.desist({quick:!0})}),a={},t.each(o)}),s=function(){r(a).each(function(t){t.desist({quick:!0})}),a={},t.each(o)},this.listenTo(t,"refresh reset sort",s),s()}})},templates:function(exports,require,module){!function(){var root=this,exports={},jade=function(t){function e(t){return null!=t}return Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),t.merge=function(t,n){var i=t["class"],r=n["class"];(i||r)&&(i=i||[],r=r||[],Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]),i=i.filter(e),r=r.filter(e),t["class"]=i.concat(r).join(" "));for(var o in n)"class"!=o&&(t[o]=n[o]);return t},t.attrs=function(e,n){var i=[],r=e.terse;delete e.terse;var o=Object.keys(e),s=o.length;if(s){i.push("");for(var a=0;s>a;++a){var c=o[a],u=e[c];"boolean"==typeof u||null==u?u&&(r?i.push(c):i.push(c+'="'+c+'"')):0==c.indexOf("data")&&"string"!=typeof u?i.push(c+"='"+JSON.stringify(u)+"'"):"class"==c&&Array.isArray(u)?i.push(c+'="'+t.escape(u.join(" "))+'"'):n&&n[c]?i.push(c+'="'+t.escape(u)+'"'):i.push(c+'="'+u+'"')}}return i.join(" ")},t.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},t.rethrow=function(t,e,n){if(!e)throw t;var i=3,r=require("fs").readFileSync(e,"utf8"),o=r.split("\n"),s=Math.max(n-i,0),a=Math.min(o.length,n+i),i=o.slice(s,a).map(function(t,e){var i=e+s+1;return(i==n?"  > ":"    ")+i+"| "+t}).join("\n");throw t.path=e,t.message=(e||"Jade")+":"+n+"\n"+i+"\n\n"+t.message,t},t}({});exports.includes={},exports.pages={},exports.app=function anonymous(locals){var buf=[];with(locals||{})buf.push('<div class="container"><div class="navbar"><div class="navbar-inner"><a href="#" class="brand">human.js - sample</a><ul class="nav"><li><a href="/">home</a></li><li><a href="/one">page one</a></li><li><a href="/two">page two</a></li></ul></div></div><section id="pages"></section></div>');return buf.join("")},exports.includes.watchedTask=function anonymous(locals){var buf=[];with(locals||{})buf.push("<li"+jade.attrs({id:id,"class":"watchedTask task watched"},{id:!0,"class":!0})+'><!-- task permalink--><span class="title">'+(null==(jade.interp=taskTitleHtml)?"":jade.interp)+"</span></li>");return buf.join("")},exports.pages.fourOhFour=function anonymous(locals){var buf=[];with(locals||{})buf.push('<section class="page fourOhFour"><h2>404</h2></section>');return buf.join("")},exports.pages.home=function anonymous(locals){var buf=[];with(locals||{})buf.push('<section class="page home"><h2>Home</h2><p>If you view source you\'ll see pretty things. </p></section>');return buf.join("")},exports.pages.one=function anonymous(locals){var buf=[];with(locals||{})buf.push('<section class="page pageOne"><h2>Page 1</h2></section>');return buf.join("")},exports.pages.two=function anonymous(locals){var buf=[];with(locals||{})buf.push('<section class="page pageTwo"><h2>Page 2</h2></section>');return buf.join("")},"undefined"!=typeof module?module.exports=exports:"function"==typeof define&&define.amd?define(exports):root.templatizer=exports}()},underscore:function(t,e,n){!function(){var e=this,i=e._,r={},o=Array.prototype,s=Object.prototype,a=Function.prototype,c=o.push,u=o.slice,l=o.concat,h=s.toString,f=s.hasOwnProperty,p=o.forEach,d=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,y=o.every,_=o.some,b=o.indexOf,w=o.lastIndexOf,k=Array.isArray,x=Object.keys,T=a.bind,A=function(t){return t instanceof A?t:this instanceof A?(this._wrapped=t,void 0):new A(t)};"undefined"!=typeof t?("undefined"!=typeof n&&n.exports&&(t=n.exports=A),t._=A):e._=A,A.VERSION="1.4.4";var E=A.each=A.forEach=function(t,e,n){if(null!=t)if(p&&t.forEach===p)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(n,t[i],i,t)===r)return}else for(var s in t)if(A.has(t,s)&&e.call(n,t[s],s,t)===r)return};A.map=A.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(E(t,function(t,r,o){i[i.length]=e.call(n,t,r,o)}),i)};var j="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduce===m)return i&&(e=A.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(E(t,function(t,o,s){r?n=e.call(i,n,t,o,s):(n=t,r=!0)}),!r)throw new TypeError(j);return n},A.reduceRight=A.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),g&&t.reduceRight===g)return i&&(e=A.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(o!==+o){var s=A.keys(t);o=s.length}if(E(t,function(a,c,u){c=s?s[--o]:--o,r?n=e.call(i,n,t[c],c,u):(n=t[c],r=!0)}),!r)throw new TypeError(j);return n},A.find=A.detect=function(t,e,n){var i;return S(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},A.filter=A.select=function(t,e,n){var i=[];return null==t?i:v&&t.filter===v?t.filter(e,n):(E(t,function(t,r,o){e.call(n,t,r,o)&&(i[i.length]=t)}),i)},A.reject=function(t,e,n){return A.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},A.every=A.all=function(t,e,n){e||(e=A.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,n):(E(t,function(t,o,s){return(i=i&&e.call(n,t,o,s))?void 0:r}),!!i)};var S=A.some=A.any=function(t,e,n){e||(e=A.identity);var i=!1;return null==t?i:_&&t.some===_?t.some(e,n):(E(t,function(t,o,s){return i||(i=e.call(n,t,o,s))?r:void 0}),!!i)};A.contains=A.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):S(t,function(t){return t===e})},A.invoke=function(t,e){var n=u.call(arguments,2),i=A.isFunction(e);return A.map(t,function(t){return(i?e:t[e]).apply(t,n)})},A.pluck=function(t,e){return A.map(t,function(t){return t[e]})},A.where=function(t,e,n){return A.isEmpty(e)?n?null:[]:A[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},A.findWhere=function(t,e){return A.where(t,e,!0)},A.max=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&A.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return E(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s>=i.computed&&(i={value:t,computed:s})}),i.value},A.min=function(t,e,n){if(!e&&A.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&A.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return E(t,function(t,r,o){var s=e?e.call(n,t,r,o):t;s<i.computed&&(i={value:t,computed:s})}),i.value},A.shuffle=function(t){var e,n=0,i=[];return E(t,function(t){e=A.random(n++),i[n-1]=i[e],i[e]=t}),i};var C=function(t){return A.isFunction(t)?t:function(e){return e[t]}};A.sortBy=function(t,e,n){var i=C(e);return A.pluck(A.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var O=function(t,e,n,i){var r={},o=C(e||A.identity);return E(t,function(e,s){var a=o.call(n,e,s,t);i(r,a,e)}),r};A.groupBy=function(t,e,n){return O(t,e,n,function(t,e,n){(A.has(t,e)?t[e]:t[e]=[]).push(n)})},A.countBy=function(t,e,n){return O(t,e,n,function(t,e){A.has(t,e)||(t[e]=0),t[e]++})},A.sortedIndex=function(t,e,n,i){n=null==n?A.identity:C(n);for(var r=n.call(i,e),o=0,s=t.length;s>o;){var a=o+s>>>1;n.call(i,t[a])<r?o=a+1:s=a}return o},A.toArray=function(t){return t?A.isArray(t)?u.call(t):t.length===+t.length?A.map(t,A.identity):A.values(t):[]},A.size=function(t){return null==t?0:t.length===+t.length?t.length:A.keys(t).length},A.first=A.head=A.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:u.call(t,0,e)},A.initial=function(t,e,n){return u.call(t,0,t.length-(null==e||n?1:e))},A.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:u.call(t,Math.max(t.length-e,0))},A.rest=A.tail=A.drop=function(t,e,n){return u.call(t,null==e||n?1:e)},A.compact=function(t){return A.filter(t,A.identity)};var M=function(t,e,n){return E(t,function(t){A.isArray(t)?e?c.apply(n,t):M(t,e,n):n.push(t)}),n};A.flatten=function(t,e){return M(t,e,[])},A.without=function(t){return A.difference(t,u.call(arguments,1))},A.uniq=A.unique=function(t,e,n,i){A.isFunction(e)&&(i=n,n=e,e=!1);var r=n?A.map(t,n,i):t,o=[],s=[];return E(r,function(n,i){(e?i&&s[s.length-1]===n:A.contains(s,n))||(s.push(n),o.push(t[i]))}),o},A.union=function(){return A.uniq(l.apply(o,arguments))},A.intersection=function(t){var e=u.call(arguments,1);return A.filter(A.uniq(t),function(t){return A.every(e,function(e){return A.indexOf(e,t)>=0})})},A.difference=function(t){var e=l.apply(o,u.call(arguments,1));return A.filter(t,function(t){return!A.contains(e,t)})},A.zip=function(){for(var t=u.call(arguments),e=A.max(A.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=A.pluck(t,""+i);return n},A.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},A.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=A.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(b&&t.indexOf===b)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},A.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(w&&t.lastIndexOf===w)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},A.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o},A.bind=function(t,e){if(t.bind===T&&T)return T.apply(t,u.call(arguments,1));var n=u.call(arguments,2);return function(){return t.apply(e,n.concat(u.call(arguments)))}},A.partial=function(t){var e=u.call(arguments,1);return function(){return t.apply(this,e.concat(u.call(arguments)))}},A.bindAll=function(t){var e=u.call(arguments,1);return 0===e.length&&(e=A.functions(t)),E(e,function(e){t[e]=A.bind(t[e],t)}),t},A.memoize=function(t,e){var n={};return e||(e=A.identity),function(){var i=e.apply(this,arguments);return A.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},A.delay=function(t,e){var n=u.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},A.defer=function(t){return A.delay.apply(A,[t,1].concat(u.call(arguments,1)))},A.throttle=function(t,e){var n,i,r,o,s=0,a=function(){s=new Date,r=null,o=t.apply(n,i)};return function(){var c=new Date,u=e-(c-s);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,s=c,o=t.apply(n,i)):r||(r=setTimeout(a,u)),o}},A.debounce=function(t,e,n){var i,r;return function(){var o=this,s=arguments,a=function(){i=null,n||(r=t.apply(o,s))},c=n&&!i;return clearTimeout(i),i=setTimeout(a,e),c&&(r=t.apply(o,s)),r}},A.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},A.wrap=function(t,e){return function(){var n=[t];return c.apply(n,arguments),e.apply(this,n)}},A.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},A.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},A.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)A.has(t,n)&&(e[e.length]=n);return e},A.values=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push(t[n]);return e},A.pairs=function(t){var e=[];for(var n in t)A.has(t,n)&&e.push([n,t[n]]);return e},A.invert=function(t){var e={};for(var n in t)A.has(t,n)&&(e[t[n]]=n);return e},A.functions=A.methods=function(t){var e=[];for(var n in t)A.isFunction(t[n])&&e.push(n);return e.sort()},A.extend=function(t){return E(u.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},A.pick=function(t){var e={},n=l.apply(o,u.call(arguments,1));return E(n,function(n){n in t&&(e[n]=t[n])}),e},A.omit=function(t){var e={},n=l.apply(o,u.call(arguments,1));for(var i in t)A.contains(n,i)||(e[i]=t[i]);return e},A.defaults=function(t){return E(u.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},A.clone=function(t){return A.isObject(t)?A.isArray(t)?t.slice():A.extend({},t):t},A.tap=function(t,e){return e(t),t};var N=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;
if(null==t||null==e)return t===e;t instanceof A&&(t=t._wrapped),e instanceof A&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;n.push(t),i.push(e);var s=0,a=!0;if("[object Array]"==r){if(s=t.length,a=s==e.length)for(;s--&&(a=N(t[s],e[s],n,i)););}else{var c=t.constructor,u=e.constructor;if(c!==u&&!(A.isFunction(c)&&c instanceof c&&A.isFunction(u)&&u instanceof u))return!1;for(var l in t)if(A.has(t,l)&&(s++,!(a=A.has(e,l)&&N(t[l],e[l],n,i))))break;if(a){for(l in e)if(A.has(e,l)&&!s--)break;a=!s}}return n.pop(),i.pop(),a};A.isEqual=function(t,e){return N(t,e,[],[])},A.isEmpty=function(t){if(null==t)return!0;if(A.isArray(t)||A.isString(t))return 0===t.length;for(var e in t)if(A.has(t,e))return!1;return!0},A.isElement=function(t){return!(!t||1!==t.nodeType)},A.isArray=k||function(t){return"[object Array]"==h.call(t)},A.isObject=function(t){return t===Object(t)},E(["Arguments","Function","String","Number","Date","RegExp"],function(t){A["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),A.isArguments(arguments)||(A.isArguments=function(t){return!(!t||!A.has(t,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(t){return"function"==typeof t}),A.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},A.isNaN=function(t){return A.isNumber(t)&&t!=+t},A.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},A.isNull=function(t){return null===t},A.isUndefined=function(t){return void 0===t},A.has=function(t,e){return f.call(t,e)},A.noConflict=function(){return e._=i,this},A.identity=function(t){return t},A.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},A.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=A.invert(P.escape);var $={escape:new RegExp("["+A.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(P.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(t){A[t]=function(e){return null==e?"":(""+e).replace($[t],function(e){return P[t][e]})}}),A.result=function(t,e){if(null==t)return null;var n=t[e];return A.isFunction(n)?n.call(t):n},A.mixin=function(t){E(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),B.call(this,n.apply(A,t))}})};var I=0;A.uniqueId=function(t){var e=++I+"";return t?t+e:e},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(t,e,n){var i;n=A.defaults({},n,A.templateSettings);var r=new RegExp([(n.escape||R).source,(n.interpolate||R).source,(n.evaluate||R).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,n,i,r,a){return s+=t.slice(o,a).replace(L,function(t){return"\\"+F[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,A);var c=function(t){return i.call(this,t,A)};return c.source="function("+(n.variable||"obj")+"){\n"+s+"}",c},A.chain=function(t){return A(t).chain()};var B=function(t){return this._chain?A(t).chain():t};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];A.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],B.call(this,n)}}),E(["concat","join","slice"],function(t){var e=o[t];A.prototype[t]=function(){return B.call(this,e.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this)},wildemitter:function(t,e,n){function i(){this.callbacks={}}n.exports=i,i.prototype.on=function(t){var e=3===arguments.length,n=e?arguments[1]:void 0,i=e?arguments[2]:arguments[1];return i._groupName=n,(this.callbacks[t]=this.callbacks[t]||[]).push(i),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this.on(t,n),this},i.prototype.releaseGroup=function(t){var e,n,i,r;for(e in this.callbacks)for(r=this.callbacks[e],n=0,i=r.length;i>n;n++)r[n]._groupName===t&&(r.splice(n,1),n--,i--);return this},i.prototype.off=function(t,e){var n,i=this.callbacks[t];return i?1===arguments.length?(delete this.callbacks[t],this):(n=i.indexOf(e),i.splice(n,1),this):this},i.prototype.emit=function(t){var e,n,i=[].slice.call(arguments,1),r=this.callbacks[t],o=this.getWildcardCallbacks(t);if(r)for(e=0,n=r.length;n>e;++e)r[e].apply(this,i);if(o)for(e=0,n=o.length;n>e;++e)o[e].apply(this,[t].concat(i));return this},i.prototype.getWildcardCallbacks=function(t){var e,n,i=[];for(e in this.callbacks)n=e.split("*"),("*"===e||2===n.length&&t.slice(0,n[1].length)===n[1])&&(i=i.concat(this.callbacks[e]));return i}},app:function(t,e,n){var i=e("views/main"),r=e("loading-stats"),o=e("strictmodel"),s=e("backbone"),a=e("underscore"),c=e("router"),u=e("andlog"),l=(e("async"),e("helpers/metrics")),h=e("models/me"),f=(e("clientconfig"),e("sound-effect-manager"));n.exports={blastoff:function(){a.extend(this,s.Events);var t=window.app=this;return window.me=new h,this.router=new c,this.history=s.history,this.view=new i({model:me}),this.sm=new f,s.history.start({pushState:!0,root:"/"}),t.ready=!0,this},loadSounds:function(){var t=this,e=[["rocket.mp3","rocket"],["AB06-activate-01.mp3","activate"],["AB06-deactivate-01.mp3","deactivate"],["AB06-dragndrop_task.mp3","delegate"],["AB06-new_task.mp3","newTask"],["AB06-receive_mentioned_B2.mp3","mentioned"],["AB06-task_received.mp3","taskReceived"]];e.forEach(function(e){app.jobs.push(function(n){t.sm.loadFile("/sounds/"+e[0],e[1],0,n)})})},getModel:function(t,e,n){return o.registry.lookup(t,e,n)},navigate:function(t){var e="/"===t.charAt(0)?t.slice(1):t;app.history.navigate(e,!0)},viewTaskDetail:function(t){"starred"===app.currentPage.template?app.navigate(window.location.pathname.slice(4)+"/"+t.id):app.navigate(t.url)},handleExternalLinkClick:function(){},renderPage:function(t,e){var n=$("#pages");e||(e="swap"),app.currentPage&&(app.currentPage.hide(e),app.trigger("pageunloaded",app.currentPage)),n.append(t.render("none"===e).el),t.show(e)},reportLoadStats:function(){var t;r.recordTime("fully_loaded"),t=r.get(),u.log("load stats",JSON.stringify(t,null,2)),l.identify(me),l.track("webAppLoaded",t)}}},"helpers/metrics":function(t){var e="YOUR DOMAIN.com"===window.location.hostname;t.identify=function(t){e&&(mixpanel.identify(t.id),mixpanel.name_tag(t.username),mixpanel.people.set({$email:t.email,$first_name:t.firstName,$last_name:t.lastName}),mixpanel.people.increment("web app opened"))},t.track=function(t,n,i){e&&mixpanel.track(t,n||{},i)}},"models/baseCollection":function(t,e,n){var i=e("backbone");n.exports=i.Collection.extend({next:function(t,e,n){var i,r=this.indexOf(t);return-1===r?r=0:r+1>=this.length?r=0:r+=1,i=this.at(r),e&&i!==n&&!e(i)?this.next(i,e,n||t):i},prev:function(t,e,n){var i,r=this.indexOf(t);return-1===r?r=0:0===r?r=this.length-1:r-=1,i=this.at(r),e&&i!==n&&!e(i)?this.prev(i,e,n||t):this.at(r)}})},"models/me":function(t,e,n){var i=e("strictmodel").Model;n.exports=i.extend({type:"user",props:{id:["string"],teams:["array",!0,[]],teamLimit:["number",!0,0],hasPaidTeam:["boolean",!0,!1],textSize:["string",!0,"medium"],picUrl:["string",!0],firstName:["string",!0,""],lastName:["string",!0,""],free:["boolean",!0,!1],username:["string"],email:["string",!0],jid:["string",!0],status:["string",!0],activeTask:["string",!0],newUser:["boolean",!0],didTutorial:["boolean",!0],muted:["boolean",!0]},derived:{fullName:{deps:["firstName","lastName"],cache:!0,fn:function(){return this.firstName+" "+this.lastName}},initials:{deps:["firstName","lastName"],cache:!0,fn:function(){return(this.firstName.charAt(0)+this.lastName.charAt(0)).toUpperCase()}}},session:{}})},"models/member":function(t,e,n){var i=(e("models/navItems"),e("models/task"),e("models/tasks"),e("models/messages")),r=e("underscore"),o=(e("pages/member.chat"),e("urlToBase64"),e("strictmodel").Model);n.exports=o.extend({init:function(){this.getShippedTasks=r.once(this.getShippedTasks),app.jobs.push(r.bind(this.handlePicUrlChange,this))},type:"member",props:{id:["string",!0],firstName:["string",!0],lastName:["string",!0],created:["date"],email:["string",!0],username:["string",!0,""],lastLogin:["date"],activeTask:"string",statusMessage:"string",didTutorial:"boolean",muted:"boolean",textSize:["string",!0,"medium"],presence:["string",!0,"offline"],me:["boolean",!0,!1],lastInteraction:["date",!0,"0"],pinned:["boolean",!0,!1],smallPicUrl:["string"],largePicUrl:["string"],theirLastReadChatId:["string",!0,""],myLastReadChatId:["string",!0,""],latestChatId:["string",!0,""]},derived:{team:{fn:function(){return this.collection.parent}},fullName:{deps:["firstName","lastName"],fn:function(){return this.firstName+" "+this.lastName}},initials:{deps:["firstName","lastName"],fn:function(){return this.firstName?(this.firstName.charAt(0)+this.lastName.charAt(0)).toUpperCase():void 0}},activeTaskTitle:{deps:["activeTask"],fn:function(){var t=app.getModel("task",this.activeTask,this.team.id);return t?t.taskTitleHtml:""}},url:{deps:["username"],fn:function(){return this.team.id?this.team.url+"/"+this.username:""}},tasksUrl:{deps:["username"],cache:!0,fn:function(){return this.url+"/tasks"}},lateredUrl:{deps:["username"],fn:function(){return this.url+"/latered"}},shippedUrl:{deps:["username"],fn:function(){return this.url+"/shipped"}},chatUrl:{deps:["username"],fn:function(){return this.url+"/chat"}},atName:{deps:["username"],fn:function(){return"@"+this.username}},working:{deps:["activeTask"],fn:function(){return!!this.activeTask}},unread:{deps:["myLastReadChatId","latestChatId"],fn:function(){return this.myLastReadChatId!==this.latestChatId}}},session:{tasks:["array",!0,[]],latered:["array",!0,[]],shipped:["array",!0,[]],lastPage:["string",!0,"tasks"],active:["boolean",!0,!1],unsentChatText:["string",!0,""],order:["number",!1,0],hasChatHistory:["boolean",!0,!0],historyHasBeenFetched:["boolean",!0,!1],historyHasBeenRendered:["boolean",!0,!1]},collections:{messages:i}})},"models/members":function(t,e,n){var i=e("models/baseCollection"),r=e("models/member");n.exports=i.extend({type:"members",model:r,initialize:function(){this.on("dataloaded",this.initBindings,this)},initBindings:function(){this.bind("add remove reset change:presence",this.setMemberOrder,this),this.setMemberOrder()},canAdd:function(){return!0},getByUserId:function(t){return this.detect(function(e){return~e.id.indexOf(t)})},getByUsername:function(t){var e=(t||"").toLowerCase();return this.find(function(t){return t&&t.username&&t.username.toLowerCase?t.username.toLowerCase()===e:!1})},isValidLink:function(t){var e=(t||"").toLowerCase();return!!this.getByUsername(t)||"team"===e||"all"===e},setMemberOrder:function(t){var e=this.models.sort(function(t,e){if(t.presence===e.presence){var n="offline"===t.presence?-1:1;return t.lastLogin>e.lastLogin?1*n:-1*n}return"offline"===t.presence?1:-1});e.forEach(function(e,n){t&&(e.order=-1),e.order=n})}})},"models/message":function(t,e,n){var i=e("strictmodel").Model,r=(e("underscore"),e("templates")),o=e("omnibox");n.exports=i.extend({type:"message",props:{id:["string",!0],team:["string",!0],created:["date",!0],to:["string",!0],from:["string",!0],message:["string",!0],body:["string",!0],meta:["object",!1],pause:["string",!1],continuation:["boolean",!0,!1],messageType:["string"]},session:{alreadyTried:["boolean",!1,!1],pending:["boolean",!0,!1]},derived:{me:{cache:!0,fn:function(){return this.from===me.id}},paused:{cache:!0,fn:function(){return this.pause>12e5}},messageCompat:{cache:!0,fn:function(){return this.body||this.message}},teamModel:{cache:!0,fn:function(){return app.teams.get(this.team)}},formattedTime:{cache:!0,fn:function(){return this.created.format("{MM}/{dd} {h}:{mm}{t}")}},htmlMessage:{cache:!0,fn:function(){return o.toHTML(this.messageCompat,this.teamModel)}},memberModel:{cache:!0,fn:function(){return this.shippedBy||app.getModel("member",this.from,this.teamModel.id)}},taskUrl:{cache:!0,fn:function(){return("shipped"===this.messageType||"unshipped"===this.messageType)&&this.teamModel.url+"/task/"+this.taskId}},taskId:{cache:!0,fn:function(){return this.meta&&this.meta.taskId}},shippedBy:{cache:!0,fn:function(){var t,e=this.meta&&this.meta.memberId;return e&&(t=app.getModel("member",e,this.teamModel.id)),t||""}},taskTitleHtml:{cache:!0,fn:function(){var t=this.meta&&this.meta.taskTitle;return t?o.toHTML(t,this.teamModel):""}},html:{cache:!0,fn:function(){return r.includes.chatMessage({chat:this})}},partialHtml:{cache:!0,fn:function(){return r.includes.chatWrap({chat:this})}},mentionsMe:{cache:!0,fn:function(){return~this.messageCompat.search(new RegExp("(^|\\s)@(all|team|"+me.username.toLowerCase()+")\\b","i"))}},classList:{cache:!0,fn:function(){var t=this.messageType||this.type,e=[t,"chat"];return this.paused&&e.push("paused"),this.me&&e.push("fromMe"),"&!"===this.from&&"shipped"!==t&&"unshipped"!==t&&e.push("system"),this.pending?e.push("pending"):e.push("newSpeaker"),e.join(" ")}},messageClassList:{cache:!0,fn:function(){var t=[];return this.mentionsMe&&"chat"===this.messageType&&t.push("mentionsMe"),this.pending&&t.push("pending"),t.join(" ")}},permaLink:{cache:!0,fn:function(){return this.teamModel.chatUrl+"/"+this.created.format("{M}-{d}-{yyyy}")+"/"+this.id}},isChat:{fn:function(){return"chat"===this.messageType||"directChat"===this.messageType}}},shouldGroupWith:function(t){return t&&!this.paused&&this.isChat&&t.isChat&&t.from===this.from}})},"models/messages":function(t,e,n){var i=e("models/baseCollection"),r=e("models/message");n.exports=i.extend({type:"messages",model:r})},"pages/404":function(t,e,n){var i=e("pages/base"),r=e("templates");n.exports=i.extend({template:r.pages.fourOhFour,render:function(){return this.pageRender(),this}})},"pages/base":function(t,e,n){var i=e("strictview"),r=e("underscore"),o=(e("templates"),e("keymaster"));n.exports=i.extend({registerKeyboardShortcuts:function(){var t=this;r.each(this.keyboardShortcuts,function(e,n){o(n,t.cid,r.bind(t[e],t))}),o.setScope(this.cid)},unregisterKeyboardShortcuts:function(){o.deleteScope(this.cid)},show:function(){return this.registerKeyboardShortcuts(),$("body").scrollTop(0),this.detached&&(this.$("#pages").append(this.el),this.detached=!1),this.$el.addClass("active"),app.currentPage=this,document.title=r.result(this,"title")+" • &!",this.trigger("pageloaded"),this},hide:function(){var t=this;return $("header").removeClass(r.result(this,"headerClass")),this.$el.removeClass("active"),this.trigger("pageunloaded"),this.cache?(this.$el.detach(),this.detached=!0):(this.desist({quick:!0}),r.delay(function(){$(t.el).unbind().remove()},500)),this.unregisterKeyboardShortcuts(),this}})},"pages/home":function(t,e,n){var i=e("pages/base"),r=e("templates");n.exports=i.extend({template:r.pages.home,render:function(){return this.basicRender(),this}})},"pages/one":function(t,e,n){var i=e("pages/base"),r=e("templates");n.exports=i.extend({template:r.pages.one,render:function(){return this.basicRender(),this}})},"pages/two":function(t,e,n){var i=e("pages/base"),r=e("templates");n.exports=i.extend({template:r.pages.two,render:function(){return this.basicRender(),this}})},router:function(t,e,n){var i=e("backbone");n.exports=i.Router.extend({routes:{"":"home",one:"pageOne",two:"pageTwo"},home:function(){var t=e("pages/home");app.renderPage(new t({model:me}))},pageOne:function(){var t=e("pages/one");app.renderPage(new t({model:me}))},pageTwo:function(){var t=e("pages/two");app.renderPage(new t({model:me}))}})},"views/collectionView":function(t,e,n){var i=e("views/base"),r=e("underscore");e("keymaster"),n.exports=i.extend({_views:[],initialize:function(t){r.defaults(t,{sortable:!1,selectable:!0,refreshInterval:0}),r.extend(this,t),t.refreshInterval&&this.refreshLoop(),this.bindomatic(app,"pageunloaded",this.stopListening),this.bindomatic(this.collection,"all",this.renderCollection,{trigger:!0})},render:function(){return this.delegateEvents(),this.handleBindings(),this.handleFocusedItem(),this},desist:function(){this.stopListening(),this.stopLoop=!0},filterBy:function(t){var e=r.filter(this.getModels(),t);this.renderCollection({models:e})},refreshLoop:function(){var t=this;setTimeout(function(){t.stopLoop||(0===$(t.el).find(".ui-sortable-placeholder").length&&t.renderCollection(),t.refreshLoop())},this.refreshInterval)},getModels:function(){return"function"==typeof this.collection.models?this.collection.models():this.collection.models},renderCollection:function(t){var e=this,n="undefined"!=typeof t&&t.models?t.models:this.getModels();this.removeAllViews(),r(n).each(function(t){e.appendView(t)}),this.sortable&&this.makeSortable(),this.trigger("rendered",this)},removeAllViews:function(){r(this._views).each(function(t){t.desist({quick:!0})}),this._views=[],$(this.el).empty()},appendView:function(t){this._views.push(new this.ViewConstructor({model:t,containerEl:this.el,parent:this}))},makeSortable:function(){function t(t){return e.collection.get(t.attr("id"))}var e=this;$(this.el).sortable({update:function(t,n){var i=$(n.item);if(n.position.left<0)return $(this).sortable("cancel"),void 0;var r=$(this).sortable("toArray");e.parent.trigger("resorted",r,i.attr("id"),i.index())},start:function(e,n){app.eventsDisabled&&e.stopPropagation();var i=t(n.item);me.focusedItem=i},zIndex:5e5,appendTo:"body",helper:"clone"})},handleFocusedItem:function(){this.collection.get(me.focusedItem)||(me.focusedItem=!$(".mainPageInput").is(":focus")&&this.collection.length>0?this.collection.first():null)},handleTabKey:function(t){var e=t.shiftKey,n=me.focusedItem,i=this.getModels(),o=r(i).indexOf(n),s=$(".mainPageInput");n?e?0===o?s.focus():($(":focus").blur(),this.focusPrevious(t)):o+1>=i.length?s.focus():($(":focus").blur(),this.focusNext(t)):i.length?($(":focus").blur(),e?this.focusPrevious(t):this.focusNext(t)):s.focus()},focusNext:function(t){var e=this.collection.next(me.focusedItem);me.focusedItem=e,$(":focus").blur(),t&&(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation())},focusPrevious:function(t){var e=this.collection.prev(me.focusedItem);me.focusedItem=e,$(":focus").blur(),t&&(t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation())}})},"views/main":function(t,e,n){var i=e("strictview"),r=e("underscore"),o=e("templates"),s=e("keymaster");e("helpers/metrics"),n.exports=i.extend({initialize:function(){$(r.bind(this.render,this)),app.history.on("route",this.updateActiveNav,this)},events:{"click a[href]":"handleClick"},classBindings:{},imageBindings:{},render:function(){return this.setElement($("body")[0]),$(this.el).prepend(o.app(me.toTemplate)),this.createGlobalNavShortcuts(),this.delegateEvents(),this.handleBindings(),this},handleClick:function(t){var e=$(t.target),n=e.is("a")?e[0]:e.closest("a")[0],i=window.location.host===n.host,r=n.pathname.slice(1);if(!app.eventsDisabled){if(i)return app.navigate(r),!1;app.handleExternalLinkClick(t)}},updateActiveNav:function(){var t=window.location.pathname;$(".nav a").each(function(){var e=r.compact($(this).attr("href").split("/")).join("/").toLowerCase(),n=r.compact(t.split("/")).join("/").toLowerCase();n===e?$(this).parent().addClass("active"):$(this).parent().removeClass("active")})},createGlobalNavShortcuts:function(){function t(t){return function(e){e.isInput||(t(),e.preventDefault())}}var e=this;s("esc",function(t){me.keyboardShortcutMode=!0,t.isInput?t.element.blur():me.selectedItems.length&&me.deselectAll()}),s("n",function(t){return t.isInput?void 0:(e.focusMainInput(),!1)}),s("shift+/",t(app.openHelpWindow))}})}});