{
  "name": "iron",
  "description": "Encapsulated tokens (encrypted and mac'ed objects)",
  "version": "2.0.0",
  "author": {
    "name": "Eran Hammer",
    "email": "eran@hueniverse.com",
    "url": "http://hueniverse.com"
  },
  "contributors": [],
  "repository": {
    "type": "git",
    "url": "git://github.com/hueniverse/iron"
  },
  "main": "index",
  "keywords": [
    "authentication",
    "encryption",
    "data integrity"
  ],
  "engines": {
    "node": "0.10.x"
  },
  "dependencies": {
    "hoek": "1.x.x",
    "boom": "2.x.x",
    "cryptiles": "2.x.x"
  },
  "devDependencies": {
    "lab": "1.x.x"
  },
  "scripts": {
    "test": "make test-cov"
  },
  "licenses": [
    {
      "type": "BSD",
      "url": "http://github.com/hueniverse/iron/raw/master/LICENSE"
    }
  ],
  "readme": "![iron](https://raw.github.com/hueniverse/iron/master/images/iron.png)\n\n<img align=\"right\" src=\"https://raw.github.com/hueniverse/iron/master/images/logo.png\" /> **iron** is a cryptographic\nutility for sealing a JSON object using symmetric key encryption with message integrity verification. Or in other words,\nit lets you encrypt an object, send it around (in cookies, authentication credentials, etc.), then receive it back and\ndecrypt it. The algorithm ensures that the message was not tempered with, and also provides a simple mechanism for\npassword rotation.\n\nCurrent version: **2.0**\n\nNote: 2.0 is the same exact protocol as 1.0. The version increment refelects a change in\nthe internal error format used by the module and used by the node API.\n\n[![Build Status](https://secure.travis-ci.org/hueniverse/iron.png)](http://travis-ci.org/hueniverse/iron)\n\n\n# Table of Content\n\n- [**Introduction**](#introduction)\n<p></p>\n- [Usage](#usage)\n  - [Options](#options)\n<p></p>\n- [**Security Considerations**](#security-considerations)\n  - [Plaintext Storage of Credentials](#plaintext-storage-of-credentials)\n<p></p>\n- [**Frequently Asked Questions**](#frequently-asked-questions)\n<p></p>\n- [**Acknowledgements**](#acknowledgements)\n\n# Introduction\n\n**iron** provides methods for encrypting an object, generating a message authentication code (MAC), and serializing both\ninto a cookie / URI / HTTP header friendly format. Sealed objects are useful in cases where state has to reside on other\napplications not under your control, without exposing the details of this state to those application.\n\nFor example, sealed objects allow you to encrypt the permissions granted to the authenticated user, store those permissions\nusing a cookie, without worrying about someone modifying (or even knowing) what those permissions are. Any modification to\nthe encrypted data will invalidate its integrity.\n\nThe seal process follows these general steps:\n\n- generate encryption salt `saltE`\n- derive an encryption key `keyE` using `saltE` and a password\n- generate an integrity salt `saltI`\n- derive an integrity (HMAC) key `keyI` using `saltI`\n- generate a random [initialization vector](http://en.wikipedia.org/wiki/Initialization_vector) `iv`\n- encrypt the serialized object string using `keyE` and `iv`\n- mac the encrypted object along with `saltE` and `iv`\n- concatenate `saltE`, `saltI`, `iv`, and the encrypted object into a URI-friendly string\n\n\n# Usage\n\nTo seal an object:\n\n```javascript\nvar obj = {\n    a: 1,\n    b: 2,\n    c: [3, 4, 5],\n    d: {\n        e: 'f'\n    }\n};\n\nvar password = 'some_not_random_password';\n\nIron.seal(obj, password, Iron.defaults, function (err, sealed) {\n\n    console.log(sealed);\n});\n```\n\nThe result `sealed` object is a string which can be sent via cookies, URI query parameter, or an HTTP header attribute.\nTo unseal the string:\n\n```javascript\nIron.unseal(sealed, password, Iron.defaults, function (err, unsealed) {\n\n    // unsealed has the same content as obj\n});\n```\n\n### Options\n\n**iron** provides a few options for customizing the key deriviation algorithm used to generate encryption and integrity\nverification keys as well as the algorithms and salt sizes used. The _'seal()'_ and _'unseal()'_ methods take an options\nobject with the following **required** keys:\n\n- `encryption` - defines the options used by the encryption process.\n- `integrity` - defines the options used by the HMAC itegrity verification process.\n\nEach of these option objects includes the following **required** keys:\n\n- `saltBits` - the size of the salt (random buffer used to ensure that two identical objects will generate a different encrypted result.\n- `algorithm` - the algorithm used ('aes-256-cbc' for encryption and 'sha256' for integrity are the only two supported at this time).\n- `iterations` - the number of iterations used to derive a key from the password (set to '1' if not sure).\n\nThe _'seal()'_ and _'unseal()'_ methods also take the following **optional** options keys:\n\n- `ttl` - sealed object lifetime in milliseconds where 0 means forever. Defaults to 0.\n- `timestampSkewSec` - number of seconds of permitted clock skew for incoming expirations. Defaults to 60 seconds.\n- `localtimeOffsetMsec` - local clock time offset express in a number of milliseconds (positive or negative). Defaults to 0.\n\n**iron** includes a default options object which can be passed to the methods as shown above in the example. The default\nsettings are:\n\n```javascript\nvar options = {\n    encryption: {\n        saltBits: 256,\n        algorithm: 'aes-256-cbc',\n        iterations: 1\n    },\n    integrity: {\n        saltBits: 256,\n        algorithm: 'sha256',\n        iterations: 1\n    },\n    ttl: 0,\n    timestampSkewSec: 60,\n    localtimeOffsetMsec: 0\n};\n```\n\nAlternatively, a Buffer object of sufficient size (matching the algorithm key size requirement) can be passed as the\npassword, in which case, `saltBits` and `iterations` are ignored and the buffer is used as-is.\n\n\n# Security Considerations\n\nThe greatest sources of security risks are usually found not in **iron** but in the policies and procedures surrounding its use.\nImplementers are strongly encouraged to assess how this module addresses their security requirements. This section includes\nan incomplete list of security considerations that must be reviewed and understood before using **iron**.\n\n\n### Plaintext Storage of Credentials\n\nThe **iron** password is only used to derive keys and is never sent or shared. However, in order to generate (and regenerate) the\nkeys used to encrypt the object and compute the request MAC, the server must have access to the password in plaintext form. This\nis in contrast, for example, to modern operating systems, which store only a one-way hash of user credentials.\n\nIf an attacker were to gain access to the password - or worse, to the server's database of all such password - he or she would be able\nto encrypt and decrypt any sealed object. Accordingly, it is critical that servers protect these passwords from unauthorized\naccess.\n\n\n# Frequently Asked Questions\n\n### Where is the protocol specification?\n\nIf you are looking for some prose explaining how all this works, there isn't any. **iron** is being developed as an open source\nproject instead of a standard. In other words, the [code](/hueniverse/iron/tree/master/lib) is the specification. Not sure about\nsomething? Open an issue!\n\n\n### Is it done?\n\nPretty much. The API is locked and any changes to the 1.x branch will be backward compatible. Feel free to open issues with\nquestions and suggestions.\n\n\n### How come the defaults must be manually passed and not automatically applied?\n\nBecause you should know what you are doing and explicitly set it. The options matter a lot to the security properties of the\nimplementation. While reasonable defaults are provided, you still need to explicitly state you want to use them.\n\n\n# Acknowledgements\n\nSpecial thanks to Adam Barth for his infinite patience, and always insightful feedback and advice.\n\nThe **iron** logo was based on origin artwork created by [Chris Carrasco](http://chriscarrasco.com).\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/hueniverse/iron/issues"
  },
  "homepage": "https://github.com/hueniverse/iron",
  "_id": "iron@2.0.0",
  "_from": "iron@2.x.x"
}
