mixin user_li(user, index)
    li(data-user-id=user.id, data-user-index=index)
        span Before
        mixin user_a(user, index)

mixin user_a(user, index)
    a(href=user.url, data-user-index=index) Within #{user.name}

ul
    - var i = 0
    each user in users
        mixin user_li(user, i)
        - i++